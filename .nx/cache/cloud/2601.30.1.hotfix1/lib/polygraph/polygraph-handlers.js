'use strict';const a4_0x26e1d0=a4_0x3f68;(function(_0x131f26,_0x539b0d){const _0x6d4af4=a4_0x3f68,_0x1f8dbd=_0x131f26();while(!![]){try{const _0x2cf47f=-parseInt(_0x6d4af4(0xbe))/0x1*(-parseInt(_0x6d4af4(0xe3))/0x2)+parseInt(_0x6d4af4(0x9c))/0x3*(parseInt(_0x6d4af4(0xf0))/0x4)+-parseInt(_0x6d4af4(0x92))/0x5*(-parseInt(_0x6d4af4(0xd9))/0x6)+-parseInt(_0x6d4af4(0x109))/0x7+-parseInt(_0x6d4af4(0xa7))/0x8+parseInt(_0x6d4af4(0x102))/0x9*(-parseInt(_0x6d4af4(0xf4))/0xa)+parseInt(_0x6d4af4(0xc9))/0xb;if(_0x2cf47f===_0x539b0d)break;else _0x1f8dbd['push'](_0x1f8dbd['shift']());}catch(_0x2a1cce){_0x1f8dbd['push'](_0x1f8dbd['shift']());}}}(a4_0xfe72,0xb2adb));var __defProp=Object[a4_0x26e1d0(0xf7)],__getOwnPropDesc=Object[a4_0x26e1d0(0xbc)],__getOwnPropNames=Object[a4_0x26e1d0(0x94)],__hasOwnProp=Object[a4_0x26e1d0(0xf1)][a4_0x26e1d0(0xe1)],__export=(_0x354441,_0x1babf5)=>{for(var _0x46191f in _0x1babf5)__defProp(_0x354441,_0x46191f,{'get':_0x1babf5[_0x46191f],'enumerable':!![]});},__copyProps=(_0x688bd2,_0x325612,_0x39fd09,_0x129be8)=>{const _0x30dab2=a4_0x26e1d0;if(_0x325612&&typeof _0x325612==='object'||typeof _0x325612==='function'){for(let _0x169ed9 of __getOwnPropNames(_0x325612))if(!__hasOwnProp[_0x30dab2(0xac)](_0x688bd2,_0x169ed9)&&_0x169ed9!==_0x39fd09)__defProp(_0x688bd2,_0x169ed9,{'get':()=>_0x325612[_0x169ed9],'enumerable':!(_0x129be8=__getOwnPropDesc(_0x325612,_0x169ed9))||_0x129be8[_0x30dab2(0xd2)]});}return _0x688bd2;},__toCommonJS=_0x1f2e74=>__copyProps(__defProp({},'__esModule',{'value':!![]}),_0x1f2e74),polygraph_handlers_exports={};__export(polygraph_handlers_exports,{'polygraphDelegate':()=>polygraphDelegate,'polygraphInit':()=>polygraphInit}),module[a4_0x26e1d0(0xb4)]=__toCommonJS(polygraph_handlers_exports);var import_child_process=require(a4_0x26e1d0(0x81)),import_fs=require('fs'),import_os=require('os'),import_path=require('path');async function initPolygraphSession(_0x1dfc61,_0x393001){const _0x45d8a4=a4_0x26e1d0;var _0x4060ab;const _0x44643d=_0x393001['nxCloudUrl']+_0x45d8a4(0xa0),_0x4bbc24={'Content-Type':'application/json',..._0x393001[_0x45d8a4(0xd8)]},_0x1bcbfb=JSON[_0x45d8a4(0x108)]({'sessionId':_0x393001[_0x45d8a4(0x107)],'workspaceId':_0x393001[_0x45d8a4(0xbb)],'additionalContext':''});_0x1dfc61[_0x45d8a4(0xf8)](_0x45d8a4(0xdb)+_0x44643d),_0x1dfc61['log'](_0x45d8a4(0xda)+JSON[_0x45d8a4(0x108)](_0x4bbc24,null,0x2)),_0x1dfc61[_0x45d8a4(0xf8)](_0x45d8a4(0x104)+_0x1bcbfb);try{const _0x576e17=new AbortController(),_0x44795c=setTimeout(()=>_0x576e17[_0x45d8a4(0xa6)](),0x2710),_0x85b0ce=await fetch(_0x44643d,{'method':'POST','headers':_0x4bbc24,'body':_0x1bcbfb,'signal':_0x576e17[_0x45d8a4(0x8c)]});clearTimeout(_0x44795c);const _0x5632df=await _0x85b0ce['text']();if(!_0x85b0ce['ok']){if(_0x85b0ce[_0x45d8a4(0x110)]===0x191)return _0x1dfc61['log']('Authentication\x20error:\x20'+_0x5632df),{'url':_0x44643d,'error':{'type':'authentication','message':_0x5632df}};return _0x1dfc61['log'](_0x45d8a4(0xcb)+_0x85b0ce['status']+'\x20'+_0x5632df),{'url':_0x44643d,'error':{'type':_0x45d8a4(0x115),'message':_0x5632df}};}const _0x444fe7=JSON[_0x45d8a4(0xb8)](_0x5632df);return(_0x4060ab=_0x1dfc61['debug'])==null?void 0x0:_0x4060ab['call'](_0x1dfc61,_0x45d8a4(0x93)+JSON[_0x45d8a4(0x108)](_0x444fe7)),{'url':_0x44643d,'data':_0x444fe7};}catch(_0x28bff2){const _0x2636fb=_0x28bff2 instanceof Error?_0x28bff2[_0x45d8a4(0x100)]:String(_0x28bff2);return _0x1dfc61['log']('Network\x20error:\x20'+_0x2636fb),{'url':_0x44643d,'error':{'type':'network','message':_0x2636fb}};}}function getCloneRegistryPath(_0x399857,_0x418676){const _0x2dfbac=a4_0x26e1d0;return(0x0,import_path['join'])(_0x399857,_0x2dfbac(0x95),_0x2dfbac(0xa2),_0x418676,_0x2dfbac(0x9e));}async function ensurePolygraphGitignore(_0xd4cfc6){const _0x33bb93=a4_0x26e1d0,_0x211c4c=(0x0,import_path[_0x33bb93(0xf3)])(_0xd4cfc6,_0x33bb93(0xb1));if(!(0x0,import_fs[_0x33bb93(0x91)])(_0x211c4c))return;const _0x5d9631=(0x0,import_fs[_0x33bb93(0xf9)])(_0x211c4c,_0x33bb93(0xfc)),_0x5b66cc=_0x5d9631['split']('\x0a');if(_0x5b66cc[_0x33bb93(0x9b)](_0xf4a4eb=>_0xf4a4eb[_0x33bb93(0x101)]()===_0x33bb93(0x95)||_0xf4a4eb[_0x33bb93(0x101)]()===_0x33bb93(0xec)))return;const _0x5ce0ab=_0x5d9631[_0x33bb93(0xe7)]('\x0a')?_0x5d9631+'.nx/\x0a':_0x5d9631+_0x33bb93(0x11e);(0x0,import_fs['writeFileSync'])(_0x211c4c,_0x5ce0ab,_0x33bb93(0xfc));}function loadCloneRegistry(_0x1da526){const _0x4f38f2=a4_0x26e1d0;if(!(0x0,import_fs[_0x4f38f2(0x91)])(_0x1da526))return null;try{const _0x87064=(0x0,import_fs[_0x4f38f2(0xf9)])(_0x1da526,'utf-8');return JSON[_0x4f38f2(0xb8)](_0x87064);}catch{return null;}}function a4_0xfe72(){const _0x1918b3=['length','--print','npm','\x20has\x20expired','\x0a\x0aUse\x20cloud_polygraph_coordinate\x20to\x20execute\x20tasks\x20across\x20these\x20repositories.','signal','bun','--dangerously-skip-permissions','running',']\x20stderr:\x20','existsSync','5wrrWQu','Polygraph\x20init-session\x20response:\x20','getOwnPropertyNames','.nx','\x20seconds','logger','\x20at\x20','replace','git\x20checkout\x20','some','1389OKwQQj','taskTimeout','workspace.json','executeTask','/nx-cloud/polygraph/init-session','--continue','polygraph','Task\x20failed:\x20','path','\x20to\x20','abort','2316312ilxWtN','git\x20reset\x20--hard','pipe','bun.lockb','Starting\x20new\x20session\x20for\x20workspace\x20','call','split','\x0aURL:\x20','npm\x20install','defaultBranch','.gitignore','values','.\x0aAvailable\x20repositories:\x20','exports','No\x20Polygraph\x20session\x20found\x20with\x20ID:\x20',']\x20Spawn\x20error:\x20','Failed\x20to\x20clone\x20repositories:\x20','parse','exit',']\x20Task\x20timed\x20out\x20after\x20','nxCloudId','getOwnPropertyDescriptor','substring','198624gzbZoi','\x0a\x0aTask:\x20','dirname','output','No\x20credential\x20found\x20for\x20workspace\x20','\x0a\x0aCloned\x20repositories:\x0a','Installing\x20dependencies\x20with\x20','mkdirSync','writeFileSync','maxRetries','execSync','20107296GCeVXD','process','Error:\x20','yarn','Credential\x20for\x20workspace\x20','Failed\x20to\x20clone\x20','\x0a\x0aPartial\x20output:\x0a','killAll','SIGTERM','enumerable','\x20in\x20','pop','localPath','expiresAt','\x0astderr:\x20','authHeaders','3545448WgGDLZ','Request\x20headers:\x20','Making\x20polygraph\x20init-session\x20request\x20to:\x20','Failed\x20to\x20install\x20dependencies\x20with\x20','stderr','url','name','git\x20clone\x20','hasOwnProperty','retryCount','4bOOqOk','end',')\x20exceeded\x20for\x20workspace\x20','agents','endsWith','Dependencies\x20installed\x20successfully','Reset\x20session\x20state\x20for\x20workspace\x20','Context:\x20','completed','.nx/','get','toString','_id','1744UCtJKC','prototype','error','join','95160nidmYi','Killing\x20process\x20for\x20workspace\x20','Using\x20--continue\x20for\x20workspace\x20','defineProperty','log','readFileSync','map','hasExistingSession','utf-8','.git','git\x20pull\x20origin\x20','repositoryFullName','message','trim','1098vyvOiz','failed','Request\x20body:\x20','.claude',']\x20stdout:\x20','sessionId','stringify','5849214xxJiPt','Failed\x20to\x20initialize\x20Polygraph\x20session:\x20','...','workspaces','find','data','Failed\x20to\x20reset\x20clone\x20at\x20','status','success','Task\x20timed\x20out\x20after\x20','Claude\x20exited\x20with\x20code\x20','clones','other','git\x20rev-parse\x20--git-dir','token','@github.com/','https://x-access-token:','kill','Prompt:\x20','workspaceId','Failed\x20to\x20spawn\x20Claude:\x20','\x0a.nx/\x0a','Resetting\x20clone\x20at\x20','repoFullName','.\x20Run\x20cloud_polygraph_init\x20first.','pnpm','Killing\x20all\x20child\x20agent\x20processes','now','child_process','Max\x20retries\x20(','stdout','pending','env','stdin'];a4_0xfe72=function(){return _0x1918b3;};return a4_0xfe72();}function saveCloneRegistry(_0xaf162a,_0x26c3ec){const _0x27424f=a4_0x26e1d0,_0x271c91=(0x0,import_path['dirname'])(_0xaf162a);!(0x0,import_fs[_0x27424f(0x91)])(_0x271c91)&&(0x0,import_fs['mkdirSync'])(_0x271c91,{'recursive':!![]}),(0x0,import_fs['writeFileSync'])(_0xaf162a,JSON['stringify'](_0x26c3ec,null,0x2),_0x27424f(0xfc));}function getClonePath(_0x13fbbf,_0x4a65b2){const _0x23e849=a4_0x26e1d0;return(0x0,import_path[_0x23e849(0xf3)])((0x0,import_os['tmpdir'])(),_0x23e849(0xa2),_0x13fbbf,_0x4a65b2);}function isValidClone(_0xa746eb){const _0x203674=a4_0x26e1d0;if(!(0x0,import_fs[_0x203674(0x91)])(_0xa746eb))return![];try{return(0x0,import_child_process['execSync'])(_0x203674(0x116),{'cwd':_0xa746eb,'stdio':_0x203674(0xa9)}),!![];}catch{return![];}}function detectPackageManager(_0x4d91f5){const _0x5a2a69=a4_0x26e1d0;if((0x0,import_fs[_0x5a2a69(0x91)])((0x0,import_path['join'])(_0x4d91f5,'pnpm-lock.yaml')))return _0x5a2a69(0x7e);if((0x0,import_fs[_0x5a2a69(0x91)])((0x0,import_path[_0x5a2a69(0xf3)])(_0x4d91f5,'yarn.lock')))return _0x5a2a69(0xcc);if((0x0,import_fs[_0x5a2a69(0x91)])((0x0,import_path['join'])(_0x4d91f5,_0x5a2a69(0xaa))))return _0x5a2a69(0x8d);return'npm';}function installDependencies(_0x567cac,_0x353011){const _0x3194bc=a4_0x26e1d0,_0x591553=detectPackageManager(_0x567cac),_0x5708ca=_0x591553===_0x3194bc(0x89)?_0x3194bc(0xaf):_0x591553+'\x20install';_0x353011['log'](_0x3194bc(0xc4)+_0x591553+_0x3194bc(0xd3)+_0x567cac);try{(0x0,import_child_process[_0x3194bc(0xc8)])(_0x5708ca,{'cwd':_0x567cac,'stdio':_0x3194bc(0xa9),'env':{...process[_0x3194bc(0x85)]}}),_0x353011['log'](_0x3194bc(0xe8));}catch(_0x2446c6){const _0x2e6158=_0x2446c6 instanceof Error?_0x2446c6[_0x3194bc(0x100)]:String(_0x2446c6);throw new Error(_0x3194bc(0xdc)+_0x591553+':\x20'+_0x2e6158);}}function resetCloneToCleanState(_0x400a19,_0x4ae546,_0x4c978e){const _0x20f056=a4_0x26e1d0;_0x4c978e[_0x20f056(0xf8)](_0x20f056(0x7b)+_0x400a19+_0x20f056(0xa5)+_0x4ae546);const _0x5f4d88={...process['env'],'GIT_TERMINAL_PROMPT':'0'};try{const _0xab377f=_0x4ae546[_0x20f056(0x99)](/[^a-zA-Z0-9/_-]/g,'');if(_0xab377f!==_0x4ae546)throw new Error('Invalid\x20branch\x20name:\x20'+_0x4ae546);(0x0,import_child_process[_0x20f056(0xc8)])(_0x20f056(0x9a)+_0xab377f,{'cwd':_0x400a19,'stdio':_0x20f056(0xa9),'env':_0x5f4d88}),(0x0,import_child_process[_0x20f056(0xc8)])(_0x20f056(0xa8),{'cwd':_0x400a19,'stdio':_0x20f056(0xa9),'env':_0x5f4d88}),(0x0,import_child_process[_0x20f056(0xc8)])('git\x20clean\x20-fd',{'cwd':_0x400a19,'stdio':_0x20f056(0xa9),'env':_0x5f4d88}),(0x0,import_child_process['execSync'])(_0x20f056(0xfe)+_0xab377f,{'cwd':_0x400a19,'stdio':'pipe','env':_0x5f4d88});}catch(_0x1a4a0e){const _0x549b80=_0x1a4a0e instanceof Error?_0x1a4a0e[_0x20f056(0x100)]:String(_0x1a4a0e);throw new Error(_0x20f056(0x10f)+_0x400a19+':\x20'+_0x549b80);}}function cloneRepo(_0xc067e5,_0x4a78c1,_0x4f390a,_0xf3cbad){const _0x20248e=a4_0x26e1d0;_0xf3cbad['log']('Cloning\x20'+_0xc067e5+_0x20248e(0xa5)+_0x4f390a);const _0x78d82d=(0x0,import_path[_0x20248e(0xc0)])(_0x4f390a);!(0x0,import_fs[_0x20248e(0x91)])(_0x78d82d)&&(0x0,import_fs[_0x20248e(0xc5)])(_0x78d82d,{'recursive':!![]});const _0x388c8c=_0x20248e(0x119)+_0x4a78c1+_0x20248e(0x118)+_0xc067e5+_0x20248e(0xfd);try{(0x0,import_child_process[_0x20248e(0xc8)])(_0x20248e(0xe0)+_0x388c8c+'\x20'+_0x4f390a,{'stdio':'pipe','env':{...process[_0x20248e(0x85)],'GIT_TERMINAL_PROMPT':'0'}});}catch(_0x5ed0ce){const _0x373e6f=_0x5ed0ce instanceof Error?_0x5ed0ce['message']:String(_0x5ed0ce),_0x18aa18=_0x373e6f['replace'](/x-access-token:[^@]+@/g,'x-access-token:***@');throw new Error(_0x20248e(0xce)+_0xc067e5+':\x20'+_0x18aa18);}}function cloneOrResetRepo(_0x176e16,_0x528cf2,_0x124232,_0x24ea6c,_0x1fc680){const _0x32fc2a=a4_0x26e1d0,_0x244d0f=_0x176e16['vcsConfiguration'][_0x32fc2a(0xff)],_0x48a7cf=_0x244d0f[_0x32fc2a(0xad)]('/')['pop']()??_0x244d0f,_0x214c96=getClonePath(_0x124232,_0x48a7cf);if(_0x528cf2[_0x32fc2a(0xd6)]<Date[_0x32fc2a(0x80)]())throw new Error(_0x32fc2a(0xcd)+_0x176e16['name']+_0x32fc2a(0x8a));const _0xa0db89=_0x24ea6c[_0x32fc2a(0x114)][_0x32fc2a(0x10d)](_0x1e263a=>_0x1e263a[_0x32fc2a(0x11c)]===_0x176e16['_id']);if(_0xa0db89&&isValidClone(_0xa0db89[_0x32fc2a(0xd5)]))return resetCloneToCleanState(_0xa0db89[_0x32fc2a(0xd5)],_0x176e16[_0x32fc2a(0xb0)],_0x1fc680),_0xa0db89;return cloneRepo(_0x244d0f,_0x528cf2[_0x32fc2a(0x117)],_0x214c96,_0x1fc680),installDependencies(_0x214c96,_0x1fc680),{'workspaceId':_0x176e16[_0x32fc2a(0xef)],'repoFullName':_0x244d0f,'localPath':_0x214c96,'defaultBranch':_0x176e16[_0x32fc2a(0xb0)],'clonedAt':Date['now']()};}async function clonePolygraphRepositories(_0x5a4ad1,_0x176858,_0x1b474e){const _0x379641=a4_0x26e1d0,{sessionId:_0x4c8f24,workspaces:_0x513373,credentials:_0x5c6166}=_0x1b474e;try{await ensurePolygraphGitignore(_0x5a4ad1);const _0x38d02d=getCloneRegistryPath(_0x5a4ad1,_0x4c8f24);let _0x475921=loadCloneRegistry(_0x38d02d);!_0x475921&&(_0x475921={'sessionId':_0x4c8f24,'createdAt':Date['now'](),'clones':[]});const _0x20fe65=[];for(const _0x2b06cc of _0x513373){const _0x400c57=_0x5c6166[_0x379641(0x10d)](_0x2ea7ae=>_0x2ea7ae[_0x379641(0x11c)]===_0x2b06cc[_0x379641(0xef)]);if(!_0x400c57)throw new Error(_0x379641(0xc2)+_0x2b06cc[_0x379641(0xdf)]+'\x20('+_0x2b06cc[_0x379641(0xef)]+')');const _0x167281=cloneOrResetRepo(_0x2b06cc,_0x400c57,_0x4c8f24,_0x475921,_0x176858);_0x20fe65['push'](_0x167281);}return _0x475921[_0x379641(0x114)]=_0x20fe65,saveCloneRegistry(_0x38d02d,_0x475921),{'success':!![],'sessionId':_0x4c8f24,'clones':_0x20fe65};}catch(_0xa3d069){const _0x2b67e7=_0xa3d069 instanceof Error?_0xa3d069[_0x379641(0x100)]:String(_0xa3d069);return _0x176858[_0x379641(0xf8)](_0x379641(0xb7)+_0x2b67e7),{'success':![],'sessionId':_0x4c8f24,'clones':[],'error':_0x2b67e7};}}var import_child_process2=require('child_process'),import_fs2=require('fs'),import_path2=require(a4_0x26e1d0(0xa4));function ensureSandboxSettings(_0x27afad){const _0x30c53d=a4_0x26e1d0,_0x4c6855=(0x0,import_path2[_0x30c53d(0xf3)])(_0x27afad,_0x30c53d(0x105));!(0x0,import_fs2[_0x30c53d(0x91)])(_0x4c6855)&&(0x0,import_fs2[_0x30c53d(0xc5)])(_0x4c6855,{'recursive':!![]});const _0x959360=(0x0,import_path2[_0x30c53d(0xf3)])(_0x4c6855,'settings.json'),_0x5e87d3={'sandbox':{'enabled':!![],'autoAllowBashIfSandboxed':!![],'allowUnsandboxedCommands':![]}};(0x0,import_fs2[_0x30c53d(0xc6)])(_0x959360,JSON['stringify'](_0x5e87d3,null,0x2),_0x30c53d(0xfc));}var ChildAgentManager=class{constructor(_0x6a6359){const _0x18e15f=a4_0x26e1d0;this[_0x18e15f(0x97)]=_0x6a6359;}[a4_0x26e1d0(0xe6)]=new Map();[a4_0x26e1d0(0xc7)]=0x3;['taskTimeout']=0x5*0x3c*0x3e8;async[a4_0x26e1d0(0x9f)](_0x303f4f,_0x3f2256,_0x3241da,_0x377688,_0x5c6651){const _0xd76bc9=a4_0x26e1d0;let _0x540854=this['agents'][_0xd76bc9(0xed)](_0x303f4f);!_0x540854&&(_0x540854={'workspaceId':_0x303f4f,'repoPath':_0x3f2256,'process':null,'status':'pending','hasExistingSession':![],'retryCount':0x0},this[_0xd76bc9(0xe6)]['set'](_0x303f4f,_0x540854));if(_0x540854['retryCount']>=this[_0xd76bc9(0xc7)])return{'status':'failed','output':'','error':_0xd76bc9(0x82)+this[_0xd76bc9(0xc7)]+_0xd76bc9(0xe5)+_0x303f4f};const _0x10abf7=_0x377688?_0xd76bc9(0xea)+_0x377688+_0xd76bc9(0xbf)+_0x3241da:_0x3241da;ensureSandboxSettings(_0x3f2256);const _0x4c3696=[_0xd76bc9(0x88),_0xd76bc9(0x8e)];return _0x540854[_0xd76bc9(0xfb)]?(_0x4c3696['unshift'](_0xd76bc9(0xa1)),this['logger'][_0xd76bc9(0xf8)](_0xd76bc9(0xf6)+_0x303f4f)):this[_0xd76bc9(0x97)][_0xd76bc9(0xf8)](_0xd76bc9(0xab)+_0x303f4f),this[_0xd76bc9(0x97)][_0xd76bc9(0xf8)]('Executing\x20task\x20in\x20'+_0x3f2256),this['logger'][_0xd76bc9(0xf8)](_0xd76bc9(0x11b)+_0x10abf7[_0xd76bc9(0xbd)](0x0,0xc8)+_0xd76bc9(0x10b)),new Promise(_0x3bcda1=>{const _0xa272c=_0xd76bc9;_0x540854['status']=_0xa272c(0x8f);const _0x579add=(0x0,import_child_process2['spawn'])('claude',_0x4c3696,{'cwd':_0x3f2256,'env':{...process['env']}});_0x540854[_0xa272c(0xca)]=_0x579add;let _0xf42b63='',_0x1952f6='';_0x579add[_0xa272c(0x86)]['write'](_0x10abf7),_0x579add[_0xa272c(0x86)][_0xa272c(0xe4)](),_0x579add[_0xa272c(0x83)]['on'](_0xa272c(0x10e),_0x33d3af=>{const _0x5cc0f1=_0xa272c,_0x53c6f8=_0x33d3af[_0x5cc0f1(0xee)]();_0xf42b63+=_0x53c6f8,this[_0x5cc0f1(0x97)]['log']('['+_0x303f4f+_0x5cc0f1(0x106)+_0x53c6f8['substring'](0x0,0x64)+(_0x53c6f8[_0x5cc0f1(0x87)]>0x64?'...':'')),_0x5c6651==null?void 0x0:_0x5c6651(_0x53c6f8);}),_0x579add[_0xa272c(0xdd)]['on']('data',_0x4b7809=>{const _0x4a89ec=_0xa272c,_0x5089a4=_0x4b7809[_0x4a89ec(0xee)]();_0x1952f6+=_0x5089a4,this[_0x4a89ec(0x97)]['log']('['+_0x303f4f+_0x4a89ec(0x90)+_0x5089a4);});const _0x113195=setTimeout(()=>{const _0x2dad1f=_0xa272c;this[_0x2dad1f(0x97)][_0x2dad1f(0xf8)]('['+_0x303f4f+_0x2dad1f(0xba)+this['taskTimeout']+'ms'),_0x579add[_0x2dad1f(0x11a)](),_0x540854['status']=_0x2dad1f(0x103),_0x540854['process']=null,_0x540854[_0x2dad1f(0xe2)]++,_0x3bcda1({'status':'failed','output':_0xf42b63,'error':_0x2dad1f(0x112)+this[_0x2dad1f(0x9d)]/0x3e8+_0x2dad1f(0x96)});},this['taskTimeout']);_0x579add['on']('close',_0x484ea0=>{const _0x3fd3a9=_0xa272c;clearTimeout(_0x113195),_0x540854[_0x3fd3a9(0xca)]=null,this[_0x3fd3a9(0x97)][_0x3fd3a9(0xf8)]('['+_0x303f4f+']\x20Claude\x20exited\x20with\x20code\x20'+_0x484ea0),_0x484ea0===0x0?(_0x540854[_0x3fd3a9(0xfb)]=!![],_0x540854['status']=_0x3fd3a9(0xeb),_0x540854[_0x3fd3a9(0xe2)]=0x0,_0x3bcda1({'status':_0x3fd3a9(0xeb),'output':_0xf42b63})):(_0x540854[_0x3fd3a9(0x110)]=_0x3fd3a9(0x103),_0x540854[_0x3fd3a9(0xe2)]++,_0x3bcda1({'status':_0x3fd3a9(0x103),'output':_0xf42b63,'error':_0x3fd3a9(0x113)+_0x484ea0+(_0x1952f6?_0x3fd3a9(0xd7)+_0x1952f6:'')}));}),_0x579add['on'](_0xa272c(0xf2),_0x3cf1d9=>{const _0x2cc04c=_0xa272c;clearTimeout(_0x113195),_0x540854[_0x2cc04c(0xca)]=null,_0x540854[_0x2cc04c(0x110)]='failed',_0x540854[_0x2cc04c(0xe2)]++,this['logger'][_0x2cc04c(0xf8)]('['+_0x303f4f+_0x2cc04c(0xb6)+_0x3cf1d9[_0x2cc04c(0x100)]),_0x3bcda1({'status':_0x2cc04c(0x103),'output':_0xf42b63,'error':_0x2cc04c(0x11d)+_0x3cf1d9[_0x2cc04c(0x100)]});});});}['isHealthy'](_0x863309){const _0x1f2299=a4_0x26e1d0,_0x351bd6=this[_0x1f2299(0xe6)][_0x1f2299(0xed)](_0x863309);if(!_0x351bd6)return!![];return _0x351bd6[_0x1f2299(0xe2)]<this[_0x1f2299(0xc7)];}['getStatus'](_0x37ee49){const _0x5a05e9=a4_0x26e1d0,_0x33c424=this['agents']['get'](_0x37ee49);return(_0x33c424==null?void 0x0:_0x33c424[_0x5a05e9(0x110)])??null;}[a4_0x26e1d0(0x11a)](_0x496829){const _0x287b15=a4_0x26e1d0,_0x37cfa0=this[_0x287b15(0xe6)][_0x287b15(0xed)](_0x496829);(_0x37cfa0==null?void 0x0:_0x37cfa0[_0x287b15(0xca)])&&(this[_0x287b15(0x97)][_0x287b15(0xf8)](_0x287b15(0xf5)+_0x496829),_0x37cfa0['process']['kill'](),_0x37cfa0[_0x287b15(0xca)]=null,_0x37cfa0['status']=_0x287b15(0x103));}[a4_0x26e1d0(0xd0)](){const _0x3b5f18=a4_0x26e1d0;this[_0x3b5f18(0x97)][_0x3b5f18(0xf8)](_0x3b5f18(0x7f));for(const [_0x7e52f3]of this['agents']){this[_0x3b5f18(0x11a)](_0x7e52f3);}}['resetSession'](_0x5f43a7){const _0x1ce51b=a4_0x26e1d0,_0x1f2be2=this[_0x1ce51b(0xe6)]['get'](_0x5f43a7);_0x1f2be2&&(_0x1f2be2[_0x1ce51b(0xfb)]=![],_0x1f2be2[_0x1ce51b(0xe2)]=0x0,_0x1f2be2[_0x1ce51b(0x110)]=_0x1ce51b(0x84),this[_0x1ce51b(0x97)][_0x1ce51b(0xf8)](_0x1ce51b(0xe9)+_0x5f43a7));}['activeCount'](){const _0x430d1e=a4_0x26e1d0;let _0x12e477=0x0;for(const _0x1aa344 of this[_0x430d1e(0xe6)][_0x430d1e(0xb2)]()){_0x1aa344[_0x430d1e(0xca)]!==null&&_0x12e477++;}return _0x12e477;}};async function polygraphInit(_0x5928c5,_0x43b381){const _0x253e4e=a4_0x26e1d0,{sessionId:_0x16c1d3,nxCloudId:_0x36575e,nxCloudUrl:_0x242d8a,authHeaders:_0x21fe91,workspacePath:_0x159118}=_0x43b381,_0x300d4d=await initPolygraphSession(_0x5928c5,{'sessionId':_0x16c1d3,'nxCloudId':_0x36575e,'nxCloudUrl':_0x242d8a,'authHeaders':_0x21fe91});if(_0x300d4d['error'])return{'success':![],'error':_0x253e4e(0x10a)+_0x300d4d[_0x253e4e(0xf2)][_0x253e4e(0x100)]+_0x253e4e(0xae)+_0x300d4d[_0x253e4e(0xde)]};const _0x532339=_0x300d4d[_0x253e4e(0x10e)];if(!(_0x532339==null?void 0x0:_0x532339['workspaces'])||_0x532339[_0x253e4e(0x10c)][_0x253e4e(0x87)]===0x0)return{'success':!![],'sessionId':_0x16c1d3,'clonesSummary':'Session\x20initialized\x20but\x20no\x20workspaces\x20returned.\x0aSession\x20ID:\x20'+_0x16c1d3};const _0x4396dd=await clonePolygraphRepositories(_0x159118,_0x5928c5,_0x532339);if(!_0x4396dd[_0x253e4e(0x111)])return{'success':![],'error':_0x253e4e(0xb7)+_0x4396dd[_0x253e4e(0xf2)]};const _0x5e0888=_0x4396dd[_0x253e4e(0x114)][_0x253e4e(0xfa)](_0x4837ca=>'-\x20'+_0x4837ca[_0x253e4e(0x7c)]+':\x20'+_0x4837ca['localPath'])[_0x253e4e(0xf3)]('\x0a');return{'success':!![],'sessionId':_0x16c1d3,'clonesSummary':'Session\x20initialized\x20successfully.\x0aSession\x20ID:\x20'+_0x16c1d3+_0x253e4e(0xc3)+_0x5e0888+_0x253e4e(0x8b)};}var childAgentManager;function getChildAgentManager(_0x358bc4){const _0x5d37fc=a4_0x26e1d0;if(!childAgentManager){childAgentManager=new ChildAgentManager(_0x358bc4);const _0x3f9bbb=()=>childAgentManager[_0x5d37fc(0xd0)]();process['on'](_0x5d37fc(0xb9),_0x3f9bbb),process['on']('SIGINT',_0x3f9bbb),process['on'](_0x5d37fc(0xd1),_0x3f9bbb);}return childAgentManager;}async function polygraphDelegate(_0x4ed56a,_0x3b8179){const _0x1b3a50=a4_0x26e1d0,_0x492ea9=getChildAgentManager(_0x4ed56a),{sessionId:_0x5041e3,target:_0x35f2cd,instruction:_0x5c4100,context:_0x383279,workspacePath:_0x36e58b}=_0x3b8179,_0x3f12b8=getCloneRegistryPath(_0x36e58b,_0x5041e3),_0x529800=loadCloneRegistry(_0x3f12b8);if(!_0x529800)return{'success':![],'error':_0x1b3a50(0xb5)+_0x5041e3+_0x1b3a50(0x7d)};const _0x5d8905=_0x529800['clones'][_0x1b3a50(0x10d)](_0x2fa233=>_0x2fa233[_0x1b3a50(0x11c)]===_0x35f2cd||_0x2fa233[_0x1b3a50(0x7c)]===_0x35f2cd||_0x2fa233[_0x1b3a50(0x7c)]['endsWith']('/'+_0x35f2cd));if(!_0x5d8905){const _0x18fb56=_0x529800[_0x1b3a50(0x114)][_0x1b3a50(0xfa)](_0x5a60b9=>{const _0x2b6d17=_0x1b3a50,_0x3a1bb2=_0x5a60b9[_0x2b6d17(0x7c)][_0x2b6d17(0xad)]('/')[_0x2b6d17(0xd4)]()??_0x5a60b9[_0x2b6d17(0x7c)];return _0x3a1bb2+'\x20('+_0x5a60b9[_0x2b6d17(0x7c)]+')';})[_0x1b3a50(0xf3)](',\x20');return{'success':![],'error':'Repository\x20\x22'+_0x35f2cd+'\x22\x20not\x20found\x20in\x20session\x20'+_0x5041e3+_0x1b3a50(0xb3)+_0x18fb56};}_0x4ed56a['log']('Delegating\x20task\x20to\x20'+_0x5d8905[_0x1b3a50(0x7c)]+_0x1b3a50(0x98)+_0x5d8905[_0x1b3a50(0xd5)]);const _0x469b16=await _0x492ea9[_0x1b3a50(0x9f)](_0x5d8905[_0x1b3a50(0x11c)],_0x5d8905[_0x1b3a50(0xd5)],_0x5c4100,_0x383279);return _0x469b16[_0x1b3a50(0x110)]===_0x1b3a50(0xeb)?{'success':!![],'output':_0x469b16['output']}:{'success':![],'error':_0x1b3a50(0xa3)+_0x469b16[_0x1b3a50(0xf2)]+_0x1b3a50(0xcf)+_0x469b16[_0x1b3a50(0xc1)]};}function a4_0x3f68(_0x2168ed,_0x12140b){const _0xfe72db=a4_0xfe72();return a4_0x3f68=function(_0x3f6821,_0x1b6a0f){_0x3f6821=_0x3f6821-0x7b;let _0x4f73a4=_0xfe72db[_0x3f6821];return _0x4f73a4;},a4_0x3f68(_0x2168ed,_0x12140b);}0x0&&(module[a4_0x26e1d0(0xb4)]={'polygraphDelegate':polygraphDelegate,'polygraphInit':polygraphInit});