'use strict';const a4_0xc1eb54=a4_0x3676;(function(_0x181561,_0x1728e9){const _0x3b77cd=a4_0x3676,_0x206f5e=_0x181561();while(!![]){try{const _0x3824aa=-parseInt(_0x3b77cd(0x2a6))/0x1*(-parseInt(_0x3b77cd(0x245))/0x2)+-parseInt(_0x3b77cd(0x2dd))/0x3+parseInt(_0x3b77cd(0x25f))/0x4+-parseInt(_0x3b77cd(0x2eb))/0x5+parseInt(_0x3b77cd(0x2e5))/0x6+parseInt(_0x3b77cd(0x2ba))/0x7+-parseInt(_0x3b77cd(0x2a7))/0x8*(parseInt(_0x3b77cd(0x2a2))/0x9);if(_0x3824aa===_0x1728e9)break;else _0x206f5e['push'](_0x206f5e['shift']());}catch(_0xf050eb){_0x206f5e['push'](_0x206f5e['shift']());}}}(a4_0x3dd2,0xcfff2));var __defProp=Object[a4_0xc1eb54(0x23d)],__getOwnPropDesc=Object[a4_0xc1eb54(0x2a1)],__getOwnPropNames=Object['getOwnPropertyNames'],__hasOwnProp=Object[a4_0xc1eb54(0x232)][a4_0xc1eb54(0x1f1)],__export=(_0x1fa91a,_0x2dfae9)=>{for(var _0x16cc34 in _0x2dfae9)__defProp(_0x1fa91a,_0x16cc34,{'get':_0x2dfae9[_0x16cc34],'enumerable':!![]});},__copyProps=(_0x38ecfb,_0x33899f,_0x2f42fc,_0x5702dd)=>{const _0x5d6dae=a4_0xc1eb54;if(_0x33899f&&typeof _0x33899f===_0x5d6dae(0x287)||typeof _0x33899f===_0x5d6dae(0x2d4)){for(let _0x12009f of __getOwnPropNames(_0x33899f))if(!__hasOwnProp[_0x5d6dae(0x292)](_0x38ecfb,_0x12009f)&&_0x12009f!==_0x2f42fc)__defProp(_0x38ecfb,_0x12009f,{'get':()=>_0x33899f[_0x12009f],'enumerable':!(_0x5702dd=__getOwnPropDesc(_0x33899f,_0x12009f))||_0x5702dd[_0x5d6dae(0x29f)]});}return _0x38ecfb;},__toCommonJS=_0x13ecc5=>__copyProps(__defProp({},a4_0xc1eb54(0x236),{'value':!![]}),_0x13ecc5),polygraph_handlers_exports={};__export(polygraph_handlers_exports,{'formatPolygraphSession':()=>formatPolygraphSession,'polygraphChildStatus':()=>polygraphChildStatus,'polygraphCreatePRs':()=>polygraphCreatePRs,'polygraphDelegate':()=>polygraphDelegate,'polygraphGetSession':()=>polygraphGetSession,'polygraphInit':()=>polygraphInit,'polygraphMarkReady':()=>polygraphMarkReady,'polygraphPushBranch':()=>polygraphPushBranch,'polygraphStopChild':()=>polygraphStopChild}),module[a4_0xc1eb54(0x1fa)]=__toCommonJS(polygraph_handlers_exports);var import_child_process=require(a4_0xc1eb54(0x217)),POLYGRAPH_FETCH_TIMEOUT_MS=0x186a0;function sanitizeError(_0x3c8a1c){const _0x59a88a=a4_0xc1eb54;return _0x3c8a1c[_0x59a88a(0x2d5)](/x-access-token:[^@]+@/g,_0x59a88a(0x2ac));}function validateGitRef(_0xbaf937,_0x207cbc){const _0x25b20c=a4_0xc1eb54;if(!_0xbaf937||_0xbaf937[_0x25b20c(0x2dc)]()[_0x25b20c(0x237)]===0x0)return _0x207cbc+_0x25b20c(0x2a8);if(/[;&|`$(){}[\]!#~<>\\'"\s\x00-\x1f\x7f]/[_0x25b20c(0x257)](_0xbaf937))return _0x207cbc+'\x20contains\x20invalid\x20characters';if(_0xbaf937[_0x25b20c(0x206)]('..')||_0xbaf937[_0x25b20c(0x1ee)]('-')||_0xbaf937[_0x25b20c(0x1ee)]('.'))return _0x207cbc+'\x20contains\x20invalid\x20git\x20ref\x20pattern';return null;}function execGitWithToken(_0xbdb40a,_0x7e044){const _0x26c2bc=a4_0xc1eb54;(0x0,import_child_process[_0x26c2bc(0x234)])(_0x26c2bc(0x27c),_0xbdb40a,{'cwd':_0x7e044==null?void 0x0:_0x7e044[_0x26c2bc(0x2c0)],'stdio':_0x26c2bc(0x2cb),'env':{...process[_0x26c2bc(0x26b)],'GIT_TERMINAL_PROMPT':'0'}});}async function createPolygraphPR(_0x462177,_0x47fabf){const _0xbd1b4d=a4_0xc1eb54;var _0x40031f;const _0xbbfe45=_0x47fabf['nxCloudUrl']+_0xbd1b4d(0x2b8)+encodeURIComponent(_0x47fabf[_0xbd1b4d(0x2bc)])+_0xbd1b4d(0x1e7),_0x5bab2a={'Content-Type':_0xbd1b4d(0x2f8),..._0x47fabf[_0xbd1b4d(0x303)]},_0xe6247c=JSON[_0xbd1b4d(0x304)]({'title':_0x47fabf[_0xbd1b4d(0x2fe)],'body':_0x47fabf[_0xbd1b4d(0x204)]||null,'headBranch':_0x47fabf['headBranch'],'baseBranch':_0x47fabf[_0xbd1b4d(0x2ee)]||null,'draft':_0x47fabf['draft']??!![],'workspaceId':_0x47fabf[_0xbd1b4d(0x1e3)]});_0x462177[_0xbd1b4d(0x28b)](_0xbd1b4d(0x2c7)+_0xbbfe45),(_0x40031f=_0x462177[_0xbd1b4d(0x1e5)])==null?void 0x0:_0x40031f[_0xbd1b4d(0x292)](_0x462177,_0xbd1b4d(0x1e6)+_0xe6247c);try{const _0x3d2cb1=new AbortController(),_0x49ce87=setTimeout(()=>_0x3d2cb1[_0xbd1b4d(0x1dc)](),POLYGRAPH_FETCH_TIMEOUT_MS),_0x560290=await fetch(_0xbbfe45,{'method':_0xbd1b4d(0x24f),'headers':_0x5bab2a,'body':_0xe6247c,'signal':_0x3d2cb1[_0xbd1b4d(0x209)]});clearTimeout(_0x49ce87);const _0x17c49e=await _0x560290[_0xbd1b4d(0x25a)]();if(!_0x560290['ok'])return _0x462177[_0xbd1b4d(0x28b)](_0xbd1b4d(0x2e2)+_0x560290[_0xbd1b4d(0x27f)]+'\x20'+_0x17c49e),{'success':![],'error':_0xbd1b4d(0x305)+_0x560290['status']+':\x20'+_0x17c49e};const _0x62d94d=JSON[_0xbd1b4d(0x285)](_0x17c49e);return _0x462177[_0xbd1b4d(0x28b)]('PR\x20created\x20successfully:\x20'+_0x62d94d[_0xbd1b4d(0x288)]),{'success':!![],..._0x62d94d};}catch(_0x5824c6){const _0x3de833=_0x5824c6 instanceof Error?_0x5824c6['message']:String(_0x5824c6);return _0x462177[_0xbd1b4d(0x28b)](_0xbd1b4d(0x238)+_0x3de833),{'success':![],'error':'Failed\x20to\x20call\x20PR\x20creation\x20endpoint:\x20'+_0x3de833};}}async function getPolygraphSession(_0x3f4dae,_0x4b5a6f){const _0x147677=a4_0xc1eb54;var _0x2abb00,_0x35dfac;const _0x202462=_0x4b5a6f['nxCloudUrl']+_0x147677(0x2b8)+encodeURIComponent(_0x4b5a6f[_0x147677(0x2bc)]),_0x532802={'Content-Type':_0x147677(0x2f8),..._0x4b5a6f['authHeaders']};_0x3f4dae[_0x147677(0x28b)](_0x147677(0x216)+_0x202462);try{const _0x2b0a31=new AbortController(),_0x1d368d=setTimeout(()=>_0x2b0a31[_0x147677(0x1dc)](),POLYGRAPH_FETCH_TIMEOUT_MS),_0x3a724e=await fetch(_0x202462,{'method':_0x147677(0x27e),'headers':_0x532802,'signal':_0x2b0a31[_0x147677(0x209)]});clearTimeout(_0x1d368d);const _0x2c405a=await _0x3a724e[_0x147677(0x25a)]();if(!_0x3a724e['ok'])return _0x3f4dae[_0x147677(0x28b)](_0x147677(0x205)+_0x3a724e[_0x147677(0x27f)]+'\x20'+_0x2c405a),{'success':![],'error':'Get\x20session\x20endpoint\x20returned\x20'+_0x3a724e[_0x147677(0x27f)]+':\x20'+_0x2c405a};const _0xc4b030=JSON['parse'](_0x2c405a);return _0x3f4dae[_0x147677(0x28b)](_0x147677(0x1f8)+(((_0x2abb00=_0xc4b030[_0x147677(0x2a5)])==null?void 0x0:_0x2abb00['length'])??0x0)+'\x20workspace(s)\x20and\x20'+(((_0x35dfac=_0xc4b030[_0x147677(0x2cc)])==null?void 0x0:_0x35dfac[_0x147677(0x237)])??0x0)+'\x20PR(s)'),{'success':!![],'session':_0xc4b030};}catch(_0x5d6fdb){const _0x403455=_0x5d6fdb instanceof Error?_0x5d6fdb[_0x147677(0x24a)]:String(_0x5d6fdb);return _0x3f4dae[_0x147677(0x28b)](_0x147677(0x205)+_0x403455),{'success':![],'error':'Failed\x20to\x20call\x20get\x20session\x20endpoint:\x20'+_0x403455};}}var import_child_process2=require(a4_0xc1eb54(0x217)),import_fs=require('fs'),import_os=require('os'),import_path=require(a4_0xc1eb54(0x20f));async function initPolygraphSession(_0x396e40,_0x59317e){const _0x1c4861=a4_0xc1eb54;var _0x2ec058;const _0x546219=_0x59317e[_0x1c4861(0x2be)]+_0x1c4861(0x2b4),_0x43afcf={'Content-Type':_0x1c4861(0x2f8),..._0x59317e[_0x1c4861(0x303)]},_0x4b1f9c=JSON[_0x1c4861(0x304)]({'sessionId':_0x59317e[_0x1c4861(0x2bc)],'workspaceId':_0x59317e['nxCloudId'],'additionalContext':''});_0x396e40[_0x1c4861(0x28b)](_0x1c4861(0x265)+_0x546219),_0x396e40[_0x1c4861(0x28b)]('Request\x20headers:\x20'+JSON['stringify'](_0x43afcf,null,0x2)),_0x396e40[_0x1c4861(0x28b)]('Request\x20body:\x20'+_0x4b1f9c);try{const _0x166054=new AbortController(),_0x5ed7e6=setTimeout(()=>_0x166054[_0x1c4861(0x1dc)](),POLYGRAPH_FETCH_TIMEOUT_MS),_0x52d686=await fetch(_0x546219,{'method':_0x1c4861(0x24f),'headers':_0x43afcf,'body':_0x4b1f9c,'signal':_0x166054[_0x1c4861(0x209)]});clearTimeout(_0x5ed7e6);const _0x263c7d=await _0x52d686[_0x1c4861(0x25a)]();if(!_0x52d686['ok']){if(_0x52d686['status']===0x191)return _0x396e40[_0x1c4861(0x28b)]('Authentication\x20error:\x20'+_0x263c7d),{'url':_0x546219,'error':{'type':_0x1c4861(0x272),'message':_0x263c7d}};return _0x396e40[_0x1c4861(0x28b)](_0x1c4861(0x22c)+_0x52d686['status']+'\x20'+_0x263c7d),{'url':_0x546219,'error':{'type':_0x1c4861(0x28c),'message':_0x263c7d}};}const _0x186c36=JSON[_0x1c4861(0x285)](_0x263c7d);return(_0x2ec058=_0x396e40[_0x1c4861(0x1e5)])==null?void 0x0:_0x2ec058['call'](_0x396e40,_0x1c4861(0x2a9)+JSON[_0x1c4861(0x304)](_0x186c36)),{'url':_0x546219,'data':_0x186c36};}catch(_0x1d1bd5){const _0x5429c5=_0x1d1bd5 instanceof Error?_0x1d1bd5[_0x1c4861(0x24a)]:String(_0x1d1bd5);return _0x396e40[_0x1c4861(0x28b)]('Network\x20error:\x20'+_0x5429c5),{'url':_0x546219,'error':{'type':_0x1c4861(0x290),'message':_0x5429c5}};}}function getRegistryPath(_0x20cb05,_0x8008ba){const _0x568da8=a4_0xc1eb54;return(0x0,import_path[_0x568da8(0x213)])(_0x20cb05,_0x568da8(0x251),'polygraph',_0x8008ba,'session.json');}async function ensurePolygraphGitignore(_0x2f47fa){const _0x39c1e2=a4_0xc1eb54,_0x27db57=(0x0,import_path[_0x39c1e2(0x213)])(_0x2f47fa,'.gitignore');if(!(0x0,import_fs['existsSync'])(_0x27db57))return;const _0xa2a75b=(0x0,import_fs['readFileSync'])(_0x27db57,_0x39c1e2(0x22b)),_0x4cc3f2=_0xa2a75b[_0x39c1e2(0x228)]('\x0a');if(_0x4cc3f2[_0x39c1e2(0x24c)](_0x3ab7e7=>_0x3ab7e7[_0x39c1e2(0x2dc)]()===_0x39c1e2(0x2f1)||_0x3ab7e7[_0x39c1e2(0x2dc)]()==='.nx/polygraph/'))return;const _0x222c97=_0xa2a75b['endsWith']('\x0a')?_0xa2a75b+_0x39c1e2(0x2cf):_0xa2a75b+_0x39c1e2(0x301);(0x0,import_fs[_0x39c1e2(0x26d)])(_0x27db57,_0x222c97,'utf-8');}function loadRepoRegistry(_0x5c8ab9){const _0x5aa13a=a4_0xc1eb54;if(!(0x0,import_fs[_0x5aa13a(0x2f3)])(_0x5c8ab9))return null;try{const _0x135c24=(0x0,import_fs[_0x5aa13a(0x2c8)])(_0x5c8ab9,'utf-8');return JSON['parse'](_0x135c24);}catch{return null;}}function saveRepoRegistry(_0x342870,_0x1de864){const _0x522cdf=a4_0xc1eb54,_0x16f8c0=(0x0,import_path[_0x522cdf(0x259)])(_0x342870);!(0x0,import_fs['existsSync'])(_0x16f8c0)&&(0x0,import_fs['mkdirSync'])(_0x16f8c0,{'recursive':!![]}),(0x0,import_fs['writeFileSync'])(_0x342870,JSON[_0x522cdf(0x304)](_0x1de864,null,0x2),_0x522cdf(0x22b));}function getClonePath(_0x3e841e,_0x4a291a){const _0x1964e6=a4_0xc1eb54;return(0x0,import_path['join'])((0x0,import_os[_0x1964e6(0x20d)])(),_0x1964e6(0x261),_0x3e841e,_0x4a291a);}function a4_0x3dd2(){const _0xe0593=['target','Context:\x20','repos','Session\x20initialized\x20but\x20no\x20workspaces\x20returned.\x0aSession\x20ID:\x20','credentials','npm\x20install','enumerable','\x20\x20Branch:\x20','getOwnPropertyDescriptor','747639SmtUEV','Retrieved\x20credential\x20for\x20workspace\x20','initiator','workspaces','25499BkjwQg','8kmoaNh','\x20must\x20not\x20be\x20empty','Polygraph\x20init-session\x20response:\x20','\x20\x20CIPE:\x20','getChildrenStatus','x-access-token:***@',')\x20exceeded\x20for\x20workspace\x20','failed','Pull\x20Requests:','Failed\x20to\x20initialize\x20Polygraph\x20session:\x20','SIGTERM','SIGINT','HEAD:refs/heads/','/nx-cloud/polygraph/init-session','.\x20Use\x20cloud_polygraph_child_status\x20to\x20monitor\x20progress.','Failed\x20to\x20mark\x20PRs\x20ready:\x20','\x20already\x20exists,\x20resetting\x20to\x20clean\x20state','/nx-cloud/polygraph/session/','startTask','5341427adwwAN','Stopping\x20child\x20agent\x20for\x20','sessionId','\x20install','nxCloudUrl','clean','cwd','polygraphSessionUrl','No\x20active\x20child\x20agent\x20found\x20for\x20workspace\x20','pending','--output-format','\x20(workspace:\x20','validation','Creating\x20PR\x20via\x20nx-api:\x20','readFileSync','git\x20remote\x20get-url\x20origin','Failed\x20to\x20check\x20commits\x20ahead:\x20','pipe','pullRequests','.\x20Use\x20stop_child\x20first.','Git\x20push\x20failed:\x20','.nx/polygraph/\x0a','Found\x20repo\x20for\x20','kill','--depth','Killing\x20all\x20child\x20agent\x20processes','function','replace','\x20PR(s)\x20ready','bun','push','success','.\x20Session\x20preserved\x20for\x20--continue.','Pushing\x20','trim','3871404zRcFls','Failed\x20to\x20reset\x20clone\x20at\x20','Killing\x20process\x20for\x20workspace\x20','expiresAt','No\x20repo\x20registry\x20found\x20for\x20session\x20','PR\x20creation\x20failed:\x20','headBranch','process','4629162Hiutws','Failed\x20to\x20clone\x20','taskTimeout','repositoryFullName','URL:\x20','--dangerously-skip-permissions','2985095dfrlPB','owner','\x20commit(s)\x20ahead\x20of\x20','baseBranch','cipeUrl','Prompt:\x20','.nx/polygraph','retryCount','existsSync','stream-json','get','Failed\x20to\x20fetch\x20credentials:\x20','\x20->\x20','application/json','repo','toLowerCase','active','Remote\x20origin\x20URL:\x20','currentInstruction','title','maxRetries','git\x20rev-parse\x20--abbrev-ref\x20origin/HEAD','\x0a.nx/polygraph/\x0a','dependencyGraph','authHeaders','stringify','PR\x20creation\x20endpoint\x20returned\x20','abort','stopChild','killAll','execSync','\x0a\x0aCloned\x20repositories:\x0a','filter','claude','workspaceId','token','debug','Request\x20body:\x20','/prs/create','Failed\x20to\x20clone\x20repositories:\x20','No\x20credential\x20found\x20for\x20workspace\x20','Resetting\x20all\x20child\x20agents','branch','bun.lockb','Push\x20failed:\x20','startsWith',']\x20Task\x20timed\x20out\x20after\x20','\x22\x20in\x20session\x20','hasOwnProperty','\x22\x20at\x20','\x20\x20Nodes:\x20','--print','startedAt','Resetting\x20clone\x20at\x20','allSucceeded','Retrieved\x20session\x20with\x20','pop','exports','@github.com/','ignore','reset','data','[stderr]\x20','error','...','Repository\x20','Branch\x20name','body','Failed\x20to\x20fetch\x20session:\x20','includes',']\x20stdout:\x20','nodes','signal','prNumber','workspacePath','substring','tmpdir','Checking\x20out\x20session\x20branch\x20\x22','path','running','vcsConfiguration','Failed\x20to\x20get\x20credentials:\x20','join','Marking\x20session\x20PRs\x20ready\x20from:\x20','Failed\x20to\x20install\x20dependencies\x20with\x20','Fetching\x20session\x20from:\x20','child_process','completed','end','.git','toString','durationMs','Session\x20initialized\x20successfully.\x0aSession\x20ID:\x20','\x20\x20CI:\x20No\x20pipeline\x20execution\x20found','Credentials\x20endpoint\x20returned\x20','output','--continue','prUrls','prUrl','agents','\x0a\x0aUse\x20cloud_polygraph_delegate\x20to\x20execute\x20tasks\x20across\x20these\x20repositories.','Successfully\x20pushed\x20',',\x20got\x20','split','No\x20Polygraph\x20session\x20found\x20with\x20ID:\x20','github','utf-8','Error:\x20','localPath','.claude','find','endsWith','write','prototype','name','execFileSync','Fetching\x20session\x20credentials\x20from:\x20','__esModule','length','PR\x20creation\x20request\x20failed:\x20','Task\x20started\x20for\x20','defaultBranch','.\x20Run\x20cloud_polygraph_init\x20first.','npm','defineProperty','\x20in\x20','Base\x20branch','activeCount','stdio','--system-prompt',']\x20Spawn\x20error:\x20','--verbose','70AencyF','..HEAD','now','pull','Dependency\x20Graph:','message','No\x20commits\x20ahead\x20of\x20base\x20branch','some','npx','stderr','POST','logger','.nx','--experimental-polygraph','Remote\x20origin\x20URL\x20does\x20not\x20match\x20expected\x20repo\x20','\x20to\x20','--hard','stopped','test','No\x20commits\x20ahead\x20of\x20base\x20branch\x20--\x20nothing\x20to\x20push','dirname','text','Cloning\x20','\x20(initiator)','\x0aURL:\x20','A\x20task\x20is\x20already\x20running\x20for\x20workspace\x20','1581836xlKYwu','slice','polygraph','stdin','instruction','Credential\x20for\x20workspace\x20','Making\x20polygraph\x20init-session\x20request\x20to:\x20','origin','\x20\x20CI:\x20','Failed\x20to\x20checkout\x20session\x20branch\x20\x22','\x0a\x0aTask:\x20','repoFullName','env','Failed\x20to\x20call\x20mark\x20ready\x20endpoint:\x20','writeFileSync','getChildOutput','set','Failed\x20to\x20get\x20remote\x20URL:\x20','mkdirSync','authentication','Installing\x20dependencies\x20with\x20','\x20not\x20found\x20in\x20repo\x20registry','Delegating\x20task\x20to\x20','values','number','https://x-access-token:','/prs/mark-ready','Repository\x20\x22','prs','git','Stopping\x20child\x20for\x20workspace\x20','GET','status','map','No\x20child\x20agent\x20found\x20for\x20target\x20\x22','spawn','Workspaces:','logFile','parse','edges','object','url','Starting\x20task\x20in\x20','SIGKILL','log','other','.\x0aAvailable\x20repositories:\x20','repoPath','ciStatus','network','--force-with-lease','call','checkout',']\x20Claude\x20exited\x20with\x20code\x20','\x20not\x20found\x20in\x20session','\x22\x20not\x20found\x20in\x20session\x20','Session\x20ID','Checking\x20commits\x20ahead\x20of\x20'];a4_0x3dd2=function(){return _0xe0593;};return a4_0x3dd2();}function isValidClone(_0x501516){const _0x2cebdb=a4_0xc1eb54;if(!(0x0,import_fs[_0x2cebdb(0x2f3)])(_0x501516))return![];try{return(0x0,import_child_process2['execSync'])('git\x20rev-parse\x20--git-dir',{'cwd':_0x501516,'stdio':'pipe'}),!![];}catch{return![];}}function detectPackageManager(_0x1f6d6c){const _0x4c752a=a4_0xc1eb54;if((0x0,import_fs[_0x4c752a(0x2f3)])((0x0,import_path[_0x4c752a(0x213)])(_0x1f6d6c,'pnpm-lock.yaml')))return'pnpm';if((0x0,import_fs['existsSync'])((0x0,import_path[_0x4c752a(0x213)])(_0x1f6d6c,'yarn.lock')))return'yarn';if((0x0,import_fs[_0x4c752a(0x2f3)])((0x0,import_path[_0x4c752a(0x213)])(_0x1f6d6c,_0x4c752a(0x1ec))))return _0x4c752a(0x2d7);return _0x4c752a(0x23c);}function installDependencies(_0xd04321,_0x3fa700){const _0x305209=a4_0xc1eb54,_0x111461=detectPackageManager(_0xd04321),_0x362b57=_0x111461===_0x305209(0x23c)?_0x305209(0x29e):_0x111461+_0x305209(0x2bd);_0x3fa700[_0x305209(0x28b)](_0x305209(0x273)+_0x111461+_0x305209(0x23e)+_0xd04321);try{(0x0,import_child_process2['execSync'])(_0x362b57,{'cwd':_0xd04321,'stdio':_0x305209(0x1fc),'env':{...process[_0x305209(0x26b)]}}),_0x3fa700[_0x305209(0x28b)]('Dependencies\x20installed\x20successfully');}catch(_0x2b1e09){const _0x22d7e0=_0x2b1e09 instanceof Error?_0x2b1e09[_0x305209(0x24a)]:String(_0x2b1e09);throw new Error(_0x305209(0x215)+_0x111461+':\x20'+_0x22d7e0);}}function resetCloneToCleanState(_0x1d102b,_0x2725cb,_0x3a8a44){const _0x43fa1e=a4_0xc1eb54;_0x3a8a44[_0x43fa1e(0x28b)](_0x43fa1e(0x1f6)+_0x1d102b+_0x43fa1e(0x254)+_0x2725cb);const _0x3951f3={...process[_0x43fa1e(0x26b)],'GIT_TERMINAL_PROMPT':'0'},_0x153bbc=validateGitRef(_0x2725cb,'Branch\x20name');if(_0x153bbc)throw new Error(_0x153bbc);try{(0x0,import_child_process2['execFileSync'])(_0x43fa1e(0x27c),[_0x43fa1e(0x293),_0x2725cb],{'cwd':_0x1d102b,'stdio':_0x43fa1e(0x2cb),'env':_0x3951f3}),(0x0,import_child_process2[_0x43fa1e(0x234)])('git',[_0x43fa1e(0x1fd),_0x43fa1e(0x255)],{'cwd':_0x1d102b,'stdio':'pipe','env':_0x3951f3}),(0x0,import_child_process2[_0x43fa1e(0x234)])('git',[_0x43fa1e(0x2bf),'-fd'],{'cwd':_0x1d102b,'stdio':_0x43fa1e(0x2cb),'env':_0x3951f3}),(0x0,import_child_process2['execFileSync'])(_0x43fa1e(0x27c),[_0x43fa1e(0x248),_0x43fa1e(0x266),_0x2725cb],{'cwd':_0x1d102b,'stdio':_0x43fa1e(0x2cb),'env':_0x3951f3});}catch(_0x4185be){const _0x1cd01a=_0x4185be instanceof Error?_0x4185be[_0x43fa1e(0x24a)]:String(_0x4185be);throw new Error(_0x43fa1e(0x2de)+_0x1d102b+':\x20'+_0x1cd01a);}}function cloneRepo(_0x137736,_0x1c8231,_0x1fefa6,_0x835ec1){const _0x427d87=a4_0xc1eb54;_0x835ec1[_0x427d87(0x28b)](_0x427d87(0x25b)+_0x137736+_0x427d87(0x254)+_0x1fefa6);const _0x240d1a=(0x0,import_path['dirname'])(_0x1fefa6);!(0x0,import_fs[_0x427d87(0x2f3)])(_0x240d1a)&&(0x0,import_fs[_0x427d87(0x271)])(_0x240d1a,{'recursive':!![]});const _0x2591b4=_0x427d87(0x278)+_0x1c8231+_0x427d87(0x1fb)+_0x137736+_0x427d87(0x21a);try{execGitWithToken(['clone',_0x427d87(0x2d2),'1',_0x2591b4,_0x1fefa6]);}catch(_0x1e07f3){const _0x451738=_0x1e07f3 instanceof Error?_0x1e07f3[_0x427d87(0x24a)]:String(_0x1e07f3);throw new Error(_0x427d87(0x2e6)+_0x137736+':\x20'+sanitizeError(_0x451738));}}function checkoutSessionBranch(_0x110f68,_0x44a344,_0x36e2d0){const _0x414dfc=a4_0xc1eb54,_0x5de042=validateGitRef(_0x44a344,_0x414dfc(0x297));if(_0x5de042)throw new Error(_0x5de042);_0x36e2d0[_0x414dfc(0x28b)](_0x414dfc(0x20e)+_0x44a344+_0x414dfc(0x1f2)+_0x110f68);const _0x51bcbd={...process['env'],'GIT_TERMINAL_PROMPT':'0'};try{(0x0,import_child_process2[_0x414dfc(0x234)])('git',[_0x414dfc(0x293),'-B',_0x44a344],{'cwd':_0x110f68,'stdio':_0x414dfc(0x2cb),'env':_0x51bcbd});}catch(_0x397579){const _0x1496fb=_0x397579 instanceof Error?_0x397579[_0x414dfc(0x24a)]:String(_0x397579);throw new Error(_0x414dfc(0x268)+_0x44a344+_0x414dfc(0x1f2)+_0x110f68+':\x20'+_0x1496fb);}}function cloneOrResetRepo(_0x480b89,_0x230561,_0xb1ad44,_0x3248cb,_0x16356c){const _0x269df1=a4_0xc1eb54,_0x58f717=_0x480b89['vcsConfiguration'][_0x269df1(0x2e8)],_0x3d55d8=_0x58f717[_0x269df1(0x228)]('/')[_0x269df1(0x1f9)]()??_0x58f717,_0x123f9f=getClonePath(_0xb1ad44,_0x3d55d8);if(_0x230561[_0x269df1(0x2e0)]<Date[_0x269df1(0x247)]())throw new Error(_0x269df1(0x264)+_0x480b89[_0x269df1(0x233)]+'\x20has\x20expired');const _0x512679=_0x3248cb['repos']['find'](_0x5b691c=>_0x5b691c[_0x269df1(0x1e3)]===_0x480b89['id']);if(_0x512679&&isValidClone(_0x512679[_0x269df1(0x22d)]))return resetCloneToCleanState(_0x512679['localPath'],_0x480b89[_0x269df1(0x23a)],_0x16356c),checkoutSessionBranch(_0x512679[_0x269df1(0x22d)],_0xb1ad44,_0x16356c),_0x512679;return isValidClone(_0x123f9f)?(_0x16356c['log']('Directory\x20'+_0x123f9f+_0x269df1(0x2b7)),resetCloneToCleanState(_0x123f9f,_0x480b89[_0x269df1(0x23a)],_0x16356c)):cloneRepo(_0x58f717,_0x230561[_0x269df1(0x1e4)],_0x123f9f,_0x16356c),checkoutSessionBranch(_0x123f9f,_0xb1ad44,_0x16356c),installDependencies(_0x123f9f,_0x16356c),{'workspaceId':_0x480b89['id'],'repoFullName':_0x58f717,'localPath':_0x123f9f,'defaultBranch':_0x480b89[_0x269df1(0x23a)],'initiator':_0x480b89[_0x269df1(0x2a4)],'clonedAt':Date[_0x269df1(0x247)]()};}async function clonePolygraphRepositories(_0x14dd08,_0x54489b,_0x525482){const _0x508fd1=a4_0xc1eb54,{sessionId:_0x1674cd,workspaces:_0x442491,credentials:_0xc551ff}=_0x525482;try{await ensurePolygraphGitignore(_0x14dd08);const _0x9bff20=getRegistryPath(_0x14dd08,_0x1674cd);let _0x5d0e61=loadRepoRegistry(_0x9bff20);!_0x5d0e61&&(_0x5d0e61={'sessionId':_0x1674cd,'createdAt':Date['now'](),'repos':[]});const _0x58cdd2=[],_0x1f3e9b=_0x442491[_0x508fd1(0x22f)](_0x432792=>_0x432792[_0x508fd1(0x2a4)]);_0x1f3e9b&&_0x58cdd2[_0x508fd1(0x2d8)]({'workspaceId':_0x1f3e9b['id'],'repoFullName':_0x1f3e9b[_0x508fd1(0x211)]['repositoryFullName'],'localPath':_0x14dd08,'defaultBranch':_0x1f3e9b[_0x508fd1(0x23a)],'initiator':!![],'clonedAt':Date[_0x508fd1(0x247)]()});const _0x4d3265=_0x442491[_0x508fd1(0x1e1)](_0xdd2b9a=>!_0xdd2b9a[_0x508fd1(0x2a4)]);for(const _0x4a5c9d of _0x4d3265){const _0x4cf52e=_0xc551ff[_0x508fd1(0x22f)](_0x5349bc=>_0x5349bc['workspaceId']===_0x4a5c9d['id']);if(!_0x4cf52e)throw new Error(_0x508fd1(0x1e9)+_0x4a5c9d[_0x508fd1(0x233)]+'\x20('+_0x4a5c9d['id']+')');const _0xc1222b=cloneOrResetRepo(_0x4a5c9d,_0x4cf52e,_0x1674cd,_0x5d0e61,_0x54489b);_0x58cdd2[_0x508fd1(0x2d8)](_0xc1222b);}return _0x5d0e61['repos']=_0x58cdd2,saveRepoRegistry(_0x9bff20,_0x5d0e61),{'success':!![],'sessionId':_0x1674cd,'clones':_0x58cdd2};}catch(_0x23c9ee){const _0x19665a=_0x23c9ee instanceof Error?_0x23c9ee[_0x508fd1(0x24a)]:String(_0x23c9ee);return _0x54489b[_0x508fd1(0x28b)](_0x508fd1(0x1e8)+_0x19665a),{'success':![],'sessionId':_0x1674cd,'clones':[],'error':_0x19665a};}}function a4_0x3676(_0x4440f7,_0x2d4fc1){const _0x3dd2aa=a4_0x3dd2();return a4_0x3676=function(_0x36769b,_0x4ad215){_0x36769b=_0x36769b-0x1dc;let _0x1f3ee1=_0x3dd2aa[_0x36769b];return _0x1f3ee1;},a4_0x3676(_0x4440f7,_0x2d4fc1);}async function markPolygraphPRsReady(_0x364542,_0x74fc52){const _0x28faa0=a4_0xc1eb54,_0x986ffe=_0x74fc52[_0x28faa0(0x2be)]+_0x28faa0(0x2b8)+encodeURIComponent(_0x74fc52[_0x28faa0(0x2bc)])+_0x28faa0(0x279),_0x6ea644={'Content-Type':'application/json',..._0x74fc52[_0x28faa0(0x303)]};_0x364542['log'](_0x28faa0(0x214)+_0x986ffe);try{const _0x357270=new AbortController(),_0x2f2181=setTimeout(()=>_0x357270[_0x28faa0(0x1dc)](),POLYGRAPH_FETCH_TIMEOUT_MS),_0x58200f=await fetch(_0x986ffe,{'method':'POST','headers':_0x6ea644,'body':JSON[_0x28faa0(0x304)]({'prUrls':_0x74fc52[_0x28faa0(0x222)]}),'signal':_0x357270[_0x28faa0(0x209)]});clearTimeout(_0x2f2181);const _0x270b80=await _0x58200f[_0x28faa0(0x25a)]();if(!_0x58200f['ok'])return _0x364542[_0x28faa0(0x28b)](_0x28faa0(0x2b6)+_0x58200f['status']+'\x20'+_0x270b80),{'success':![],'error':'Mark\x20ready\x20endpoint\x20returned\x20'+_0x58200f['status']+':\x20'+_0x270b80};const _0x270255=JSON['parse'](_0x270b80),_0x405895=_0x270255['results'][_0x28faa0(0x280)](_0x451b76=>({'url':_0x451b76[_0x28faa0(0x223)],'number':_0x451b76[_0x28faa0(0x20a)],'success':_0x451b76[_0x28faa0(0x2d9)],'error':_0x451b76[_0x28faa0(0x200)]}));return _0x364542[_0x28faa0(0x28b)]('Marked\x20'+_0x405895[_0x28faa0(0x1e1)](_0x514ded=>_0x514ded[_0x28faa0(0x2d9)])[_0x28faa0(0x237)]+'/'+_0x405895[_0x28faa0(0x237)]+_0x28faa0(0x2d6)),{'success':!![],'results':_0x405895,'allSucceeded':_0x270255[_0x28faa0(0x1f7)]};}catch(_0x233124){const _0x2cdd2a=_0x233124 instanceof Error?_0x233124[_0x28faa0(0x24a)]:String(_0x233124);return _0x364542['log'](_0x28faa0(0x2b6)+_0x2cdd2a),{'success':![],'error':_0x28faa0(0x26c)+_0x2cdd2a};}}var import_child_process3=require(a4_0xc1eb54(0x217)),import_fs2=require('fs'),import_path2=require('path');function ensureSandboxAndMCP(_0x460ccb){const _0x140af6=a4_0xc1eb54,_0x369e29=(0x0,import_path2['join'])(_0x460ccb,_0x140af6(0x22e));!(0x0,import_fs2['existsSync'])(_0x369e29)&&(0x0,import_fs2[_0x140af6(0x271)])(_0x369e29,{'recursive':!![]});const _0x4b185e=(0x0,import_path2[_0x140af6(0x213)])(_0x369e29,'settings.local.json'),_0x2965ec={'sandbox':{'enabled':!![],'autoAllowBashIfSandboxed':!![],'allowUnsandboxedCommands':![]},'extraKnownMarketplaces':{'nx-claude-plugins':{'source':{'source':_0x140af6(0x22a),'repo':'nrwl/nx-ai-agents-config'}}},'enabledPlugins':{'nx@nx-claude-plugins':!![]},'enableAllProjectMcpServers':!![],'enabledMcpjsonServers':['nx'],'mcpServers':{'nx-mcp':{'type':_0x140af6(0x241),'command':_0x140af6(0x24d),'args':['nx-mcp@latest',_0x140af6(0x252)]}}};(0x0,import_fs2[_0x140af6(0x26d)])(_0x4b185e,JSON[_0x140af6(0x304)](_0x2965ec,null,0x2),_0x140af6(0x22b));}var POLYGRAPH_CHILD_SYSTEM_PROMPT='#\x20Polygraph\x20Child\x20Agent\x0a\x0aYou\x20are\x20operating\x20as\x20a\x20child\x20agent\x20in\x20a\x20Polygraph\x20multi-repository\x20coordination\x20session.\x0a\x0a##\x20Guidelines\x0a\x0a-\x20Focus\x20on\x20the\x20specific\x20task\x20delegated\x20to\x20you\x20by\x20the\x20parent\x20agent\x0a-\x20Make\x20changes\x20only\x20within\x20this\x20repository\x0a-\x20Provide\x20clear,\x20concise\x20status\x20updates\x20about\x20your\x20progress\x0a-\x20If\x20you\x20encounter\x20blocking\x20issues,\x20report\x20them\x20clearly\x20so\x20the\x20parent\x20agent\x20can\x20assist\x0a\x0a##\x20Context\x0a\x0aThis\x20skill\x20is\x20automatically\x20injected\x20when\x20this\x20repository\x20is\x20being\x20coordinated\x20as\x20part\x20of\x20a\x20larger\x20Polygraph\x20session.\x20The\x20parent\x20agent\x20will\x20provide\x20specific\x20instructions\x20for\x20the\x20task\x20at\x20hand.\x0a',ChildAgentManager=class{constructor(_0x4765d4){const _0x56336d=a4_0xc1eb54;this[_0x56336d(0x250)]=_0x4765d4;}[a4_0xc1eb54(0x224)]=new Map();[a4_0xc1eb54(0x2ff)]=0x3;['taskTimeout']=0x19*0x3c*0x3e8;[a4_0xc1eb54(0x2b9)](_0x37589e,_0x592b2d,_0x1daacf,_0xa730ed){const _0x42e515=a4_0xc1eb54;let _0x1f0371=this['agents'][_0x42e515(0x2f5)](_0x37589e);if((_0x1f0371==null?void 0x0:_0x1f0371[_0x42e515(0x27f)])==='running')return{'started':![],'error':_0x42e515(0x25e)+_0x37589e+_0x42e515(0x2cd)};!_0x1f0371&&(_0x1f0371={'workspaceId':_0x37589e,'repoPath':_0x592b2d,'process':null,'status':_0x42e515(0x2c3),'retryCount':0x0,'logFile':null,'currentInstruction':'','startedAt':null},this[_0x42e515(0x224)][_0x42e515(0x26f)](_0x37589e,_0x1f0371));if(_0x1f0371[_0x42e515(0x2f2)]>=this[_0x42e515(0x2ff)])return{'started':![],'error':'Max\x20retries\x20('+this[_0x42e515(0x2ff)]+_0x42e515(0x2ad)+_0x37589e};const _0x1db907=_0xa730ed?_0x42e515(0x29a)+_0xa730ed+_0x42e515(0x269)+_0x1daacf:_0x1daacf;ensureSandboxAndMCP(_0x592b2d);const _0x162604=(0x0,import_path2[_0x42e515(0x213)])(_0x592b2d,_0x42e515(0x251));!(0x0,import_fs2[_0x42e515(0x2f3)])(_0x162604)&&(0x0,import_fs2['mkdirSync'])(_0x162604,{'recursive':!![]});const _0xbed135=(0x0,import_path2[_0x42e515(0x213)])(_0x162604,'agent-output.log');(0x0,import_fs2['writeFileSync'])(_0xbed135,'',_0x42e515(0x22b)),_0x1f0371[_0x42e515(0x284)]=_0xbed135,_0x1f0371[_0x42e515(0x2fd)]=_0x1daacf,_0x1f0371[_0x42e515(0x1f5)]=Date[_0x42e515(0x247)]();const _0x59db36=(0x0,import_fs2['createWriteStream'])(_0xbed135,{'flags':'a'}),_0x382ae0=[_0x42e515(0x221),_0x42e515(0x1f4),_0x42e515(0x2c4),_0x42e515(0x2f4),_0x42e515(0x244),_0x42e515(0x2ea),_0x42e515(0x242),POLYGRAPH_CHILD_SYSTEM_PROMPT];this[_0x42e515(0x250)][_0x42e515(0x28b)](_0x42e515(0x289)+_0x592b2d),this[_0x42e515(0x250)][_0x42e515(0x28b)](_0x42e515(0x2f0)+_0x1db907[_0x42e515(0x20c)](0x0,0xc8)+_0x42e515(0x201)),_0x1f0371['status']=_0x42e515(0x210);const _0x5cbaeb=(0x0,import_child_process3[_0x42e515(0x282)])(_0x42e515(0x1e2),_0x382ae0,{'cwd':_0x592b2d,'env':{...process[_0x42e515(0x26b)]}});_0x1f0371[_0x42e515(0x2e4)]=_0x5cbaeb,_0x5cbaeb[_0x42e515(0x262)][_0x42e515(0x231)](_0x1db907),_0x5cbaeb[_0x42e515(0x262)][_0x42e515(0x219)](),_0x5cbaeb['stdout']['on'](_0x42e515(0x1fe),_0x443034=>{const _0x424e94=_0x42e515,_0x25880f=_0x443034['toString']();_0x59db36['write'](_0x25880f),this[_0x424e94(0x250)][_0x424e94(0x28b)]('['+_0x37589e+_0x424e94(0x207)+_0x25880f[_0x424e94(0x20c)](0x0,0x64)+(_0x25880f[_0x424e94(0x237)]>0x64?_0x424e94(0x201):''));}),_0x5cbaeb[_0x42e515(0x24e)]['on'](_0x42e515(0x1fe),_0x4e1b23=>{const _0x41ce9f=_0x42e515,_0x29623d=_0x4e1b23[_0x41ce9f(0x21b)]();_0x59db36[_0x41ce9f(0x231)](_0x41ce9f(0x1ff)+_0x29623d),this['logger'][_0x41ce9f(0x28b)]('['+_0x37589e+']\x20stderr:\x20'+_0x29623d);});const _0x143006=setTimeout(()=>{const _0x3d2d27=_0x42e515;this[_0x3d2d27(0x250)][_0x3d2d27(0x28b)]('['+_0x37589e+_0x3d2d27(0x1ef)+this[_0x3d2d27(0x2e7)]+'ms'),_0x59db36[_0x3d2d27(0x219)](),_0x5cbaeb[_0x3d2d27(0x2d1)](),_0x1f0371[_0x3d2d27(0x27f)]=_0x3d2d27(0x2ae),_0x1f0371[_0x3d2d27(0x2e4)]=null,_0x1f0371[_0x3d2d27(0x2f2)]++;},this[_0x42e515(0x2e7)]);return _0x5cbaeb['on']('close',_0x409652=>{const _0x370a99=_0x42e515;clearTimeout(_0x143006),_0x59db36['end'](),_0x1f0371['process']=null,this['logger'][_0x370a99(0x28b)]('['+_0x37589e+_0x370a99(0x294)+_0x409652),_0x409652===0x0?(_0x1f0371[_0x370a99(0x27f)]='completed',_0x1f0371['retryCount']=0x0):(_0x1f0371[_0x370a99(0x27f)]=_0x370a99(0x2ae),_0x1f0371[_0x370a99(0x2f2)]++);}),_0x5cbaeb['on'](_0x42e515(0x200),_0x588d4e=>{const _0x36b052=_0x42e515;clearTimeout(_0x143006),_0x59db36['end'](),_0x1f0371['process']=null,_0x1f0371[_0x36b052(0x27f)]='failed',_0x1f0371[_0x36b052(0x2f2)]++,this[_0x36b052(0x250)][_0x36b052(0x28b)]('['+_0x37589e+_0x36b052(0x243)+_0x588d4e[_0x36b052(0x24a)]);}),{'started':!![]};}[a4_0xc1eb54(0x2d1)](_0xbc4877){const _0x443de8=a4_0xc1eb54,_0x3f73a2=this[_0x443de8(0x224)][_0x443de8(0x2f5)](_0xbc4877);(_0x3f73a2==null?void 0x0:_0x3f73a2[_0x443de8(0x2e4)])&&(this['logger'][_0x443de8(0x28b)](_0x443de8(0x2df)+_0xbc4877),_0x3f73a2[_0x443de8(0x2e4)][_0x443de8(0x2d1)](),_0x3f73a2[_0x443de8(0x2e4)]=null,_0x3f73a2[_0x443de8(0x27f)]=_0x443de8(0x2ae));}[a4_0xc1eb54(0x1de)](){const _0x2b5a99=a4_0xc1eb54;this[_0x2b5a99(0x250)][_0x2b5a99(0x28b)](_0x2b5a99(0x2d3));for(const [_0x44a523]of this[_0x2b5a99(0x224)]){this[_0x2b5a99(0x2d1)](_0x44a523);}}['reset'](){const _0x2aee6f=a4_0xc1eb54;this[_0x2aee6f(0x250)]['log'](_0x2aee6f(0x1ea));for(const [_0x50f396]of this[_0x2aee6f(0x224)]){const _0x218567=this[_0x2aee6f(0x224)][_0x2aee6f(0x2f5)](_0x50f396);(_0x218567==null?void 0x0:_0x218567[_0x2aee6f(0x2e4)])&&this[_0x2aee6f(0x1dd)](_0x50f396);}this['agents']['clear']();}[a4_0xc1eb54(0x1dd)](_0x2e70ee){const _0x1280cd=a4_0xc1eb54,_0x30a387=this[_0x1280cd(0x224)]['get'](_0x2e70ee);if(!_0x30a387)return{'stopped':![],'output':''};let _0x246f3e='';if(_0x30a387['logFile'])try{_0x246f3e=(0x0,import_fs2['readFileSync'])(_0x30a387['logFile'],_0x1280cd(0x22b));}catch{}if(_0x30a387[_0x1280cd(0x2e4)]){this[_0x1280cd(0x250)][_0x1280cd(0x28b)](_0x1280cd(0x27d)+_0x2e70ee),_0x30a387['process']['kill'](_0x1280cd(0x2b1));const _0x331f58=_0x30a387['process'];setTimeout(()=>{const _0x120e93=_0x1280cd;try{_0x331f58[_0x120e93(0x2d1)](_0x120e93(0x28a));}catch{}},0x1388),_0x30a387['process']=null;}return _0x30a387[_0x1280cd(0x27f)]=_0x1280cd(0x256),{'stopped':!![],'output':_0x246f3e};}[a4_0xc1eb54(0x26e)](_0x1585ab,_0x13ee7a){const _0x858198=a4_0xc1eb54,_0x421ce5=this[_0x858198(0x224)][_0x858198(0x2f5)](_0x1585ab);if(!(_0x421ce5==null?void 0x0:_0x421ce5['logFile']))return null;try{const _0x240beb=(0x0,import_fs2[_0x858198(0x2c8)])(_0x421ce5[_0x858198(0x284)],_0x858198(0x22b));if(_0x13ee7a&&_0x13ee7a>0x0){const _0x28b432=_0x240beb[_0x858198(0x228)]('\x0a');return _0x28b432['slice'](-_0x13ee7a)['join']('\x0a');}return _0x240beb;}catch{return null;}}['getChildrenStatus'](){const _0x355772=a4_0xc1eb54,_0x48b87b=[];for(const _0x1e137d of this[_0x355772(0x224)][_0x355772(0x276)]()){const _0x572299=_0x1e137d[_0x355772(0x1f5)]&&_0x1e137d[_0x355772(0x27f)]===_0x355772(0x210)?Date[_0x355772(0x247)]()-_0x1e137d[_0x355772(0x1f5)]:_0x1e137d[_0x355772(0x1f5)]?Date[_0x355772(0x247)]()-_0x1e137d[_0x355772(0x1f5)]:null;_0x48b87b['push']({'workspaceId':_0x1e137d[_0x355772(0x1e3)],'repoPath':_0x1e137d['repoPath'],'status':_0x1e137d[_0x355772(0x27f)],'durationMs':_0x572299,'instruction':_0x1e137d['currentInstruction']});}return _0x48b87b;}[a4_0xc1eb54(0x240)](){const _0x373316=a4_0xc1eb54;let _0x38e148=0x0;for(const _0x5a63a7 of this[_0x373316(0x224)][_0x373316(0x276)]()){_0x5a63a7[_0x373316(0x2e4)]!==null&&_0x38e148++;}return _0x38e148;}},import_child_process4=require(a4_0xc1eb54(0x217));async function getPolygraphCredentials(_0x5f6d4a,_0x134c78){const _0x486c65=a4_0xc1eb54,_0x4bf6f9=_0x134c78[_0x486c65(0x2be)]+'/nx-cloud/polygraph/session/'+encodeURIComponent(_0x134c78[_0x486c65(0x2bc)])+'/credentials',_0x546e51={'Content-Type':_0x486c65(0x2f8),..._0x134c78[_0x486c65(0x303)]};_0x5f6d4a['log'](_0x486c65(0x235)+_0x4bf6f9);try{const _0x56fd2d=new AbortController(),_0x2d4de=setTimeout(()=>_0x56fd2d[_0x486c65(0x1dc)](),POLYGRAPH_FETCH_TIMEOUT_MS),_0x2eae66=await fetch(_0x4bf6f9,{'method':_0x486c65(0x24f),'headers':_0x546e51,'signal':_0x56fd2d[_0x486c65(0x209)]});clearTimeout(_0x2d4de);const _0x5bb9f5=await _0x2eae66[_0x486c65(0x25a)]();if(!_0x2eae66['ok'])return _0x5f6d4a[_0x486c65(0x28b)]('Failed\x20to\x20fetch\x20credentials:\x20'+_0x2eae66[_0x486c65(0x27f)]+'\x20'+_0x5bb9f5),{'success':![],'error':_0x486c65(0x21f)+_0x2eae66[_0x486c65(0x27f)]+':\x20'+_0x5bb9f5};const _0x143e86=JSON[_0x486c65(0x285)](_0x5bb9f5);return _0x5f6d4a[_0x486c65(0x28b)]('Retrieved\x20'+_0x143e86[_0x486c65(0x29d)][_0x486c65(0x237)]+'\x20credential(s)'),{'success':!![],'credentials':_0x143e86[_0x486c65(0x29d)]};}catch(_0x326517){const _0x4013a5=_0x326517 instanceof Error?_0x326517['message']:String(_0x326517);return _0x5f6d4a[_0x486c65(0x28b)](_0x486c65(0x2f6)+_0x4013a5),{'success':![],'error':'Failed\x20to\x20call\x20credentials\x20endpoint:\x20'+_0x4013a5};}}function getDefaultBranch(_0x413066,_0x5f4a1e='main'){const _0x339412=a4_0xc1eb54;try{const _0x301885=(0x0,import_child_process4[_0x339412(0x1df)])(_0x339412(0x300),{'cwd':_0x413066,'stdio':_0x339412(0x2cb),'env':{...process[_0x339412(0x26b)],'GIT_TERMINAL_PROMPT':'0'}})[_0x339412(0x21b)]()[_0x339412(0x2dc)](),_0x5f1d6=_0x301885[_0x339412(0x228)]('/');return _0x5f1d6[_0x339412(0x237)]>0x1?_0x5f1d6[_0x339412(0x260)](0x1)[_0x339412(0x213)]('/'):_0x5f4a1e;}catch{return _0x5f4a1e;}}function parseRemoteUrl(_0x1f2bb7){const _0x5b117f=_0x1f2bb7['match'](/https?:\/\/[^/]*github\.com\/([^/]+)\/([^/]+?)(\.git)?$/);if(_0x5b117f)return{'owner':_0x5b117f[0x1],'repo':_0x5b117f[0x2]};const _0x43c4d8=_0x1f2bb7['match'](/git@github\.com:([^/]+)\/(.+?)(\.git)?$/);if(_0x43c4d8)return{'owner':_0x43c4d8[0x1],'repo':_0x43c4d8[0x2]};return null;}async function pushPolygraphBranch(_0x1cf4a1,_0x11729c){const _0x2064b1=a4_0xc1eb54,_0x127849={...process[_0x2064b1(0x26b)],'GIT_TERMINAL_PROMPT':'0'},_0x15fb86=getRegistryPath(_0x11729c[_0x2064b1(0x20b)],_0x11729c[_0x2064b1(0x2bc)]),_0x9379c2=loadRepoRegistry(_0x15fb86);if(!_0x9379c2)return _0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x2e1)+_0x11729c[_0x2064b1(0x2bc)]),{'success':![],'error':'No\x20Polygraph\x20session\x20found\x20with\x20ID:\x20'+_0x11729c['sessionId'],'phase':'validation'};const _0x196063=_0x9379c2[_0x2064b1(0x29b)]['find'](_0x19a159=>_0x19a159[_0x2064b1(0x22d)]===_0x11729c[_0x2064b1(0x28e)]);if(!_0x196063)return _0x1cf4a1['log'](_0x2064b1(0x202)+_0x11729c[_0x2064b1(0x28e)]+_0x2064b1(0x274)),{'success':![],'error':_0x2064b1(0x202)+_0x11729c[_0x2064b1(0x28e)]+_0x2064b1(0x295),'phase':_0x2064b1(0x2c6)};_0x1cf4a1['log'](_0x2064b1(0x2d0)+_0x196063[_0x2064b1(0x26a)]+_0x2064b1(0x2c5)+_0x196063[_0x2064b1(0x1e3)]+')');const _0x650900=await getPolygraphCredentials(_0x1cf4a1,{'sessionId':_0x11729c[_0x2064b1(0x2bc)],'nxCloudUrl':_0x11729c[_0x2064b1(0x2be)],'authHeaders':_0x11729c['authHeaders']});if(!_0x650900['success'])return _0x1cf4a1[_0x2064b1(0x28b)]('Failed\x20to\x20get\x20credentials:\x20'+_0x650900[_0x2064b1(0x200)]),{'success':![],'error':_0x2064b1(0x212)+_0x650900[_0x2064b1(0x200)],'phase':_0x2064b1(0x29d)};const _0x43c6a2=_0x650900[_0x2064b1(0x29d)][_0x2064b1(0x22f)](_0xfac168=>_0xfac168[_0x2064b1(0x1e3)]===_0x196063[_0x2064b1(0x1e3)]);if(!_0x43c6a2)return _0x1cf4a1['log']('No\x20credential\x20found\x20for\x20workspace\x20'+_0x196063['workspaceId']),{'success':![],'error':_0x2064b1(0x1e9)+_0x196063[_0x2064b1(0x1e3)],'phase':'credentials'};_0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x2a3)+_0x196063['workspaceId']);const [_0x22398d,_0x5d8fa8]=_0x196063[_0x2064b1(0x26a)][_0x2064b1(0x228)]('/');try{const _0x617827=(0x0,import_child_process4[_0x2064b1(0x1df)])(_0x2064b1(0x2c9),{'cwd':_0x11729c['repoPath'],'stdio':_0x2064b1(0x2cb),'env':_0x127849})[_0x2064b1(0x21b)]()[_0x2064b1(0x2dc)]();_0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x2fc)+_0x617827);const _0x2148bc=parseRemoteUrl(_0x617827);if(!_0x2148bc)return{'success':![],'error':'Unable\x20to\x20parse\x20remote\x20origin\x20URL:\x20'+_0x617827,'phase':_0x2064b1(0x2c6)};if(_0x2148bc[_0x2064b1(0x2ec)][_0x2064b1(0x2fa)]()!==_0x22398d[_0x2064b1(0x2fa)]()||_0x2148bc[_0x2064b1(0x2f9)]['toLowerCase']()!==_0x5d8fa8[_0x2064b1(0x2fa)]())return _0x1cf4a1[_0x2064b1(0x28b)]('Remote\x20mismatch:\x20expected\x20'+_0x22398d+'/'+_0x5d8fa8+_0x2064b1(0x227)+_0x2148bc[_0x2064b1(0x2ec)]+'/'+_0x2148bc['repo']),{'success':![],'error':_0x2064b1(0x253)+_0x22398d+'/'+_0x5d8fa8,'phase':'validation'};}catch(_0x326ed8){const _0x233ebc=_0x326ed8 instanceof Error?_0x326ed8['message']:String(_0x326ed8);return _0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x270)+sanitizeError(_0x233ebc)),{'success':![],'error':'Failed\x20to\x20get\x20remote\x20origin\x20URL:\x20'+sanitizeError(_0x233ebc),'phase':_0x2064b1(0x2c6)};}const _0x2e9942=validateGitRef(_0x11729c[_0x2064b1(0x1eb)],_0x2064b1(0x203));if(_0x2e9942)return{'success':![],'error':_0x2e9942,'phase':'validation'};const _0x19a775=getDefaultBranch(_0x11729c[_0x2064b1(0x28e)]),_0x1be48d=validateGitRef(_0x19a775,_0x2064b1(0x23f));if(_0x1be48d)return{'success':![],'error':_0x1be48d,'phase':_0x2064b1(0x2c6)};_0x1cf4a1['log'](_0x2064b1(0x298)+_0x19a775);try{const _0x46ebc3=(0x0,import_child_process4[_0x2064b1(0x234)])(_0x2064b1(0x27c),['rev-list','--count','origin/'+_0x19a775+_0x2064b1(0x246)],{'cwd':_0x11729c['repoPath'],'stdio':_0x2064b1(0x2cb),'env':_0x127849})['toString']()[_0x2064b1(0x2dc)]();if(_0x46ebc3==='0')return _0x1cf4a1['log'](_0x2064b1(0x24b)),{'success':![],'error':_0x2064b1(0x258),'phase':'validation'};_0x1cf4a1[_0x2064b1(0x28b)](_0x46ebc3+_0x2064b1(0x2ed)+_0x19a775);}catch(_0x352e7a){const _0x251ad0=_0x352e7a instanceof Error?_0x352e7a[_0x2064b1(0x24a)]:String(_0x352e7a);return _0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x2ca)+sanitizeError(_0x251ad0)),{'success':![],'error':_0x2064b1(0x2ca)+sanitizeError(_0x251ad0),'phase':_0x2064b1(0x2c6)};}const _0x57c7da='https://x-access-token:'+_0x43c6a2[_0x2064b1(0x1e4)]+_0x2064b1(0x1fb)+_0x22398d+'/'+_0x5d8fa8+_0x2064b1(0x21a);_0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x2db)+_0x11729c[_0x2064b1(0x1eb)]+'\x20to\x20origin');try{(0x0,import_child_process4[_0x2064b1(0x234)])(_0x2064b1(0x27c),[_0x2064b1(0x2d8),_0x2064b1(0x291),_0x57c7da,_0x2064b1(0x2b3)+_0x11729c[_0x2064b1(0x1eb)]],{'cwd':_0x11729c[_0x2064b1(0x28e)],'stdio':'pipe','env':_0x127849}),_0x1cf4a1['log'](_0x2064b1(0x226)+_0x11729c[_0x2064b1(0x1eb)]);}catch(_0x2ea7a7){const _0x5b665a=_0x2ea7a7 instanceof Error?_0x2ea7a7[_0x2064b1(0x24a)]:String(_0x2ea7a7),_0x3e5c36=sanitizeError(_0x5b665a);return _0x1cf4a1[_0x2064b1(0x28b)](_0x2064b1(0x1ed)+_0x3e5c36),{'success':![],'error':_0x2064b1(0x2ce)+_0x3e5c36,'phase':_0x2064b1(0x2d8)};}return{'success':!![],'branch':_0x11729c['branch'],'remote':_0x2064b1(0x266)};}async function polygraphInit(_0x11d8f1,_0x3ef29e){const _0x4f7c24=a4_0xc1eb54,{sessionId:_0x3b35ca,nxCloudId:_0x81431e,nxCloudUrl:_0xbb3db4,authHeaders:_0x561e48,workspacePath:_0x16e712}=_0x3ef29e,_0x4ec4df=await initPolygraphSession(_0x11d8f1,{'sessionId':_0x3b35ca,'nxCloudId':_0x81431e,'nxCloudUrl':_0xbb3db4,'authHeaders':_0x561e48});if(_0x4ec4df[_0x4f7c24(0x200)])return{'success':![],'error':_0x4f7c24(0x2b0)+_0x4ec4df[_0x4f7c24(0x200)]['message']+_0x4f7c24(0x25d)+_0x4ec4df[_0x4f7c24(0x288)]};const _0x11ed5f=_0x4ec4df[_0x4f7c24(0x1fe)];if(!(_0x11ed5f==null?void 0x0:_0x11ed5f[_0x4f7c24(0x2a5)])||_0x11ed5f[_0x4f7c24(0x2a5)][_0x4f7c24(0x237)]===0x0)return{'success':!![],'sessionId':_0x3b35ca,'clonesSummary':_0x4f7c24(0x29c)+_0x3b35ca};const _0x6ed723=await clonePolygraphRepositories(_0x16e712,_0x11d8f1,_0x11ed5f);if(!_0x6ed723['success'])return{'success':![],'error':_0x4f7c24(0x1e8)+_0x6ed723[_0x4f7c24(0x200)]};const _0x18a7a7=_0x6ed723['clones'][_0x4f7c24(0x280)](_0x62d6e8=>'-\x20'+_0x62d6e8[_0x4f7c24(0x26a)]+':\x20'+_0x62d6e8[_0x4f7c24(0x22d)])['join']('\x0a');return{'success':!![],'sessionId':_0x3b35ca,'clonesSummary':_0x4f7c24(0x21d)+_0x3b35ca+_0x4f7c24(0x1e0)+_0x18a7a7+_0x4f7c24(0x225)};}var childAgentManager;function getChildAgentManager(_0x1b575b){const _0x2a88f3=a4_0xc1eb54;if(!childAgentManager){childAgentManager=new ChildAgentManager(_0x1b575b);const _0x24bcb8=()=>childAgentManager[_0x2a88f3(0x1de)]();process['on']('exit',_0x24bcb8),process['on'](_0x2a88f3(0x2b2),_0x24bcb8),process['on'](_0x2a88f3(0x2b1),_0x24bcb8);}return childAgentManager;}function polygraphDelegate(_0xf10207,_0xc5f0ac){const _0x78c9e6=a4_0xc1eb54,_0xa2124f=getChildAgentManager(_0xf10207),{sessionId:_0x46cbce,target:_0x12d595,instruction:_0x217226,context:_0x4e6fe2,workspacePath:_0x4a6203}=_0xc5f0ac,_0x4eb776=getRegistryPath(_0x4a6203,_0x46cbce),_0xe7bf8a=loadRepoRegistry(_0x4eb776);if(!_0xe7bf8a)return{'success':![],'error':_0x78c9e6(0x229)+_0x46cbce+_0x78c9e6(0x23b)};const _0x39c092=_0xe7bf8a['repos']['find'](_0x54578b=>_0x54578b[_0x78c9e6(0x1e3)]===_0x12d595||_0x54578b[_0x78c9e6(0x26a)]===_0x12d595||_0x54578b[_0x78c9e6(0x26a)][_0x78c9e6(0x230)]('/'+_0x12d595));if(!_0x39c092){const _0x10568a=_0xe7bf8a[_0x78c9e6(0x29b)][_0x78c9e6(0x280)](_0x3b2ceb=>{const _0x3a027f=_0x78c9e6,_0xe0d07=_0x3b2ceb['repoFullName']['split']('/')[_0x3a027f(0x1f9)]()??_0x3b2ceb[_0x3a027f(0x26a)];return _0xe0d07+'\x20('+_0x3b2ceb['repoFullName']+')';})['join'](',\x20');return{'success':![],'error':_0x78c9e6(0x27a)+_0x12d595+_0x78c9e6(0x296)+_0x46cbce+_0x78c9e6(0x28d)+_0x10568a};}_0xf10207[_0x78c9e6(0x28b)](_0x78c9e6(0x275)+_0x39c092['repoFullName']+'\x20at\x20'+_0x39c092[_0x78c9e6(0x22d)]);const _0x454e31=_0xa2124f[_0x78c9e6(0x2b9)](_0x39c092[_0x78c9e6(0x1e3)],_0x39c092['localPath'],_0x217226,_0x4e6fe2);return _0x454e31['started']?{'success':!![],'message':_0x78c9e6(0x239)+_0x39c092[_0x78c9e6(0x26a)]+_0x78c9e6(0x2b5)}:{'success':![],'error':_0x454e31[_0x78c9e6(0x200)]};}async function polygraphPushBranch(_0x304804,_0x41d6c6){const _0xa41ae7=a4_0xc1eb54,_0x2094cf=await pushPolygraphBranch(_0x304804,_0x41d6c6);if(!_0x2094cf[_0xa41ae7(0x2d9)])return{'success':![],'error':_0x2094cf['error']};return{'success':!![],'branch':_0x2094cf[_0xa41ae7(0x1eb)]};}async function polygraphCreatePRs(_0x4040ad,_0x5008d6){const _0x4115de=a4_0xc1eb54,_0x1c32cc=[],_0x2b43b7=getRegistryPath(_0x5008d6[_0x4115de(0x20b)],_0x5008d6[_0x4115de(0x2bc)]),_0x16ac8f=loadRepoRegistry(_0x2b43b7);if(!_0x16ac8f)return{'success':![],'error':_0x4115de(0x229)+_0x5008d6['sessionId']};for(const _0x355ebe of _0x5008d6[_0x4115de(0x27b)]){const {owner:_0x2ffd4c,repo:_0x4e08e6}=_0x355ebe,_0x258786=_0x16ac8f['repos'][_0x4115de(0x22f)](_0x5d4dff=>_0x5d4dff[_0x4115de(0x26a)]===_0x2ffd4c+'/'+_0x4e08e6);if(!_0x258786){_0x1c32cc[_0x4115de(0x2d8)]({'owner':_0x2ffd4c,'repo':_0x4e08e6,'success':![],'error':'Repository\x20'+_0x2ffd4c+'/'+_0x4e08e6+_0x4115de(0x295)});continue;}try{const _0x5e0c2a=await createPolygraphPR(_0x4040ad,{'sessionId':_0x5008d6[_0x4115de(0x2bc)],'nxCloudUrl':_0x5008d6[_0x4115de(0x2be)],'authHeaders':_0x5008d6['authHeaders'],'title':_0x355ebe['title'],'body':_0x355ebe[_0x4115de(0x204)],'headBranch':_0x355ebe[_0x4115de(0x2e3)],'baseBranch':_0x355ebe[_0x4115de(0x2ee)],'workspaceId':_0x258786['workspaceId']});_0x5e0c2a['success']?_0x1c32cc['push']({'owner':_0x2ffd4c,'repo':_0x4e08e6,'success':!![],'url':_0x5e0c2a[_0x4115de(0x288)],'number':_0x5e0c2a[_0x4115de(0x277)],'title':_0x5e0c2a['title']}):_0x1c32cc['push']({'owner':_0x2ffd4c,'repo':_0x4e08e6,'success':![],'error':_0x5e0c2a[_0x4115de(0x200)]});}catch(_0x1f551a){const _0x8032c1=_0x1f551a instanceof Error?_0x1f551a['message']:String(_0x1f551a);_0x1c32cc[_0x4115de(0x2d8)]({'owner':_0x2ffd4c,'repo':_0x4e08e6,'success':![],'error':_0x8032c1});}}return{'success':!![],'results':_0x1c32cc};}async function polygraphGetSession(_0x22c068,_0x2b2ebd){return await getPolygraphSession(_0x22c068,_0x2b2ebd);}function formatPrCiStatus(_0xb2490c,_0x34afcd){const _0x344a50=a4_0xc1eb54,_0x267007=_0x34afcd[_0xb2490c['id']];if(!_0x267007||!_0x267007['status'])return _0x344a50(0x21e);const _0x1695d9=[_0x344a50(0x267)+_0x267007[_0x344a50(0x27f)]];return _0x267007[_0x344a50(0x2ef)]&&_0x1695d9[_0x344a50(0x2d8)](_0x344a50(0x2aa)+_0x267007[_0x344a50(0x2ef)]),_0x1695d9[_0x344a50(0x213)]('\x0a');}function formatPolygraphSession(_0x373977){const _0x559d10=a4_0xc1eb54;var _0x3c985c;const _0x2b9faa=[];_0x2b9faa[_0x559d10(0x2d8)]('Session:\x20'+_0x373977[_0x559d10(0x2bc)]),_0x2b9faa['push'](_0x559d10(0x2e9)+_0x373977[_0x559d10(0x2c1)]),_0x2b9faa['push']('Status:\x20'+(_0x373977['completed']?_0x559d10(0x218):_0x559d10(0x2fb))),_0x2b9faa[_0x559d10(0x2d8)]('');if(_0x373977['workspaces'][_0x559d10(0x237)]>0x0){_0x2b9faa[_0x559d10(0x2d8)](_0x559d10(0x283));for(const _0x33fb03 of _0x373977[_0x559d10(0x2a5)]){const _0x5056f0=((_0x3c985c=_0x33fb03[_0x559d10(0x211)])==null?void 0x0:_0x3c985c[_0x559d10(0x2e8)])??_0x33fb03[_0x559d10(0x233)],_0x4bca4c=_0x33fb03[_0x559d10(0x2a4)]?_0x559d10(0x25c):'';_0x2b9faa[_0x559d10(0x2d8)]('-\x20'+_0x5056f0+_0x4bca4c);}_0x2b9faa[_0x559d10(0x2d8)]('');}if(_0x373977[_0x559d10(0x2cc)]['length']>0x0){_0x2b9faa[_0x559d10(0x2d8)](_0x559d10(0x2af));for(const _0x5840da of _0x373977[_0x559d10(0x2cc)]){_0x2b9faa[_0x559d10(0x2d8)]('-\x20'+_0x5840da['title']+'\x20['+_0x5840da[_0x559d10(0x27f)]+']'),_0x2b9faa[_0x559d10(0x2d8)](_0x559d10(0x2a0)+_0x5840da[_0x559d10(0x1eb)]),_0x2b9faa[_0x559d10(0x2d8)]('\x20\x20URL:\x20'+_0x5840da[_0x559d10(0x288)]),_0x2b9faa['push'](formatPrCiStatus(_0x5840da,_0x373977[_0x559d10(0x28f)]??{}));}_0x2b9faa['push']('');}if(_0x373977['dependencyGraph'][_0x559d10(0x208)][_0x559d10(0x237)]>0x0||_0x373977[_0x559d10(0x302)][_0x559d10(0x286)]['length']>0x0){_0x2b9faa[_0x559d10(0x2d8)](_0x559d10(0x249)),_0x2b9faa[_0x559d10(0x2d8)](_0x559d10(0x1f3)+_0x373977[_0x559d10(0x302)][_0x559d10(0x208)][_0x559d10(0x213)](',\x20'));for(const _0xbbb632 of _0x373977[_0x559d10(0x302)][_0x559d10(0x286)]){_0x2b9faa[_0x559d10(0x2d8)]('\x20\x20'+_0xbbb632['source']+_0x559d10(0x2f7)+_0xbbb632[_0x559d10(0x299)]);}}return _0x2b9faa['join']('\x0a');}async function polygraphMarkReady(_0x31af3b,_0x43957e){return await markPolygraphPRsReady(_0x31af3b,_0x43957e);}async function polygraphStopChild(_0x1e81a4,_0x203369){const _0x1a61cf=a4_0xc1eb54,_0x49fdc3=getChildAgentManager(_0x1e81a4),{sessionId:_0x13130a,target:_0x53b519,workspacePath:_0x1ce175}=_0x203369,_0x4b8386=getRegistryPath(_0x1ce175,_0x13130a),_0x39091a=loadRepoRegistry(_0x4b8386);if(!_0x39091a)return{'success':![],'error':_0x1a61cf(0x229)+_0x13130a+'.\x20Run\x20cloud_polygraph_init\x20first.'};const _0x259e2b=_0x39091a[_0x1a61cf(0x29b)][_0x1a61cf(0x22f)](_0x4a007e=>_0x4a007e[_0x1a61cf(0x1e3)]===_0x53b519||_0x4a007e['repoFullName']===_0x53b519||_0x4a007e[_0x1a61cf(0x26a)][_0x1a61cf(0x230)]('/'+_0x53b519));if(!_0x259e2b){const _0x4ea077=_0x39091a['repos'][_0x1a61cf(0x280)](_0x308a23=>{const _0x258471=_0x1a61cf,_0xced91a=_0x308a23[_0x258471(0x26a)][_0x258471(0x228)]('/')[_0x258471(0x1f9)]()??_0x308a23['repoFullName'];return _0xced91a+'\x20('+_0x308a23['repoFullName']+')';})['join'](',\x20');return{'success':![],'error':_0x1a61cf(0x27a)+_0x53b519+_0x1a61cf(0x296)+_0x13130a+_0x1a61cf(0x28d)+_0x4ea077};}_0x1e81a4[_0x1a61cf(0x28b)](_0x1a61cf(0x2bb)+_0x259e2b[_0x1a61cf(0x26a)]);const _0x217051=_0x49fdc3[_0x1a61cf(0x1dd)](_0x259e2b['workspaceId']);if(!_0x217051[_0x1a61cf(0x256)])return{'success':![],'error':_0x1a61cf(0x2c2)+_0x259e2b[_0x1a61cf(0x26a)]};return{'success':!![],'output':_0x217051[_0x1a61cf(0x220)],'message':'Stopped\x20child\x20agent\x20for\x20'+_0x259e2b[_0x1a61cf(0x26a)]+_0x1a61cf(0x2da)};}async function polygraphChildStatus(_0x1974b0,_0x1d9b16){const _0x14b54d=a4_0xc1eb54,_0x3c6109=getChildAgentManager(_0x1974b0),{sessionId:_0x270a6a,target:_0x57825a,workspacePath:_0x6e6819,tail:tail=0x32}=_0x1d9b16,_0x50f4ae=getRegistryPath(_0x6e6819,_0x270a6a),_0xfc3dff=loadRepoRegistry(_0x50f4ae);if(!_0xfc3dff)return{'success':![],'error':_0x14b54d(0x229)+_0x270a6a+_0x14b54d(0x23b)};const _0x1beaf4=_0x3c6109[_0x14b54d(0x2ab)](),_0x8da207=[];for(const _0x212111 of _0x1beaf4){const _0x534be4=_0xfc3dff[_0x14b54d(0x29b)][_0x14b54d(0x22f)](_0x3bd1cb=>_0x3bd1cb[_0x14b54d(0x1e3)]===_0x212111['workspaceId']);if(!_0x534be4)continue;if(_0x57825a&&_0x212111[_0x14b54d(0x1e3)]!==_0x57825a&&_0x534be4[_0x14b54d(0x26a)]!==_0x57825a&&!_0x534be4[_0x14b54d(0x26a)][_0x14b54d(0x230)]('/'+_0x57825a))continue;const _0x5a4b37=_0x3c6109[_0x14b54d(0x26e)](_0x212111[_0x14b54d(0x1e3)],tail)??'';_0x8da207[_0x14b54d(0x2d8)]({'workspaceId':_0x212111[_0x14b54d(0x1e3)],'repoFullName':_0x534be4[_0x14b54d(0x26a)],'status':_0x212111[_0x14b54d(0x27f)],'lastOutputLines':_0x5a4b37,'durationMs':_0x212111[_0x14b54d(0x21c)],'instruction':_0x212111[_0x14b54d(0x263)]});}if(_0x57825a&&_0x8da207[_0x14b54d(0x237)]===0x0)return{'success':![],'error':_0x14b54d(0x281)+_0x57825a+_0x14b54d(0x1f0)+_0x270a6a+'.'};return{'success':!![],'children':_0x8da207};}0x0&&(module[a4_0xc1eb54(0x1fa)]={'formatPolygraphSession':formatPolygraphSession,'polygraphChildStatus':polygraphChildStatus,'polygraphCreatePRs':polygraphCreatePRs,'polygraphDelegate':polygraphDelegate,'polygraphGetSession':polygraphGetSession,'polygraphInit':polygraphInit,'polygraphMarkReady':polygraphMarkReady,'polygraphPushBranch':polygraphPushBranch,'polygraphStopChild':polygraphStopChild});